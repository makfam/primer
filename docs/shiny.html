<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Shiny | Preceptor’s Primer for Bayesian Data Science</title>
<meta name="author" content="David Kane">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.5.3/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.2.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script><script src="libs/rglWebGL-binding-0.103.5/rglWebGL.js"></script><link href="libs/rglwidgetClass-0.103.5/rgl.css" rel="stylesheet">
<script src="libs/rglwidgetClass-0.103.5/rglClass.min.js"></script><script src="libs/CanvasMatrix4-0.103.5/CanvasMatrix.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Preceptor’s Primer for Bayesian Data Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="preamble.html">Preamble</a></li>
<li><a class="" href="shopping-week.html">Shopping Week</a></li>
<li><a class="" href="visualization.html"><span class="header-section-number">1</span> Visualization</a></li>
<li><a class="" href="wrangling.html"><span class="header-section-number">2</span> Wrangling</a></li>
<li><a class="" href="data.html"><span class="header-section-number">3</span> Data</a></li>
<li><a class="" href="rubin-causal-model.html"><span class="header-section-number">4</span> Rubin Causal Model</a></li>
<li><a class="" href="probability.html"><span class="header-section-number">5</span> Probability</a></li>
<li><a class="" href="one-parameter.html"><span class="header-section-number">6</span> One Parameter</a></li>
<li><a class="" href="two-parameters.html"><span class="header-section-number">7</span> Two Parameters</a></li>
<li><a class="" href="three-parameters.html"><span class="header-section-number">8</span> Three Parameters</a></li>
<li><a class="" href="four-parameters.html"><span class="header-section-number">9</span> Four Parameters</a></li>
<li><a class="" href="five-parameters.html"><span class="header-section-number">10</span> Five Parameters</a></li>
<li><a class="" href="n-parameters.html"><span class="header-section-number">11</span> N Parameters</a></li>
<li><a class="" href="tools.html">Tools</a></li>
<li><a class="" href="functions.html">Functions</a></li>
<li><a class="active" href="shiny.html">Shiny</a></li>
<li><a class="" href="maps.html">Maps</a></li>
<li><a class="" href="ipums.html">IPUMS</a></li>
<li><a class="" href="animation.html">Animation</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/PPBDS/primer">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="shiny" class="section level1 unnumbered">
<h1>Shiny<a class="anchor" aria-label="anchor" href="#shiny"><i class="fas fa-link"></i></a>
</h1>
<!-- Advanced students should combine simply Shiny with a package, as in [Shiny Apps as Packages](https://rtask.thinkr.fr/blog/building-a-shiny-app-as-a-package/). -->
<!-- Might also make more use of Mastery Shiny. Build this appendix around that book. -->
<div id="helpful-resources" class="section level2 unnumbered">
<h2>Helpful Resources<a class="anchor" aria-label="anchor" href="#helpful-resources"><i class="fas fa-link"></i></a>
</h2>
<p>There are a number of resources on Shiny to get you started, so definitely take a look at the following materials in addition to using this guide:</p>
<ul>
<li><p><a href="https://shiny.rstudio.com/tutorial/">Shiny Video Tutorials</a> is a comprehensive video tutorial that goes through all of the basics of building a Shiny app and adding customization. It is 2 and a half hours long, but individual chapters can be found at the same link for walk throughs on smaller topics. The first 40 or so minutes of the tutorial are particularly helpful in getting a basic app running and available on shinyapps.io.</p></li>
<li><p><a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Shiny Written Tutorials</a> is also quite comprehensive, and walks through templates for the example Shiny document. It breaks down the set up of UI, control widgets, reactive output (like dropdown variables), using R scripts and data, using reactive expressions, and sharing the app.</p></li>
<li><p><a href="https://mastering-shiny.org/"><em>Mastering Shiny</em></a> by Hadley Wickham is a really nice guide to using Shiny and best practices for higher-quality apps, including reducing code duplication.</p></li>
</ul>
</div>
<div id="set-up-and-getting-started" class="section level2 unnumbered">
<h2>Set Up and Getting Started<a class="anchor" aria-label="anchor" href="#set-up-and-getting-started"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>Sign up for a Shiny account at <a href="https://www.shinyapps.io/">https://www.shinyapps.io/</a>.</p></li>
<li><p>Install the Shiny package with: <strong>install.packages(“shiny”)</strong></p></li>
<li><p>Create a Shiny app from RStudio with: <strong>File &gt; New File &gt; Shiny Web App…</strong></p></li>
<li><p>In the popup, choose Single File (app.R) - this doesn’t particularly matter, but is the way that the Preceptor taught in class, and is the way that his example is set up. If you would prefer to have two separate files for ui and server, this is also valid and might allow for cleaner code.</p></li>
<li><p>You should now have a functioning example Shiny App - click <strong>Run App</strong> or use the keyboard shortcut <strong>Cmd/Ctrl + Shift + Enter</strong> to see this app in action! You can view it in a new window, or in an external web browser (see the dropdown arrow next to <strong>Run App</strong> for the options). Notice that the example includes a slider that allows the viewer to change the number of the bins that the histogram has.</p></li>
</ul>
</div>
<div id="building-your-basic-app" class="section level2 unnumbered">
<h2>Building Your Basic App<a class="anchor" aria-label="anchor" href="#building-your-basic-app"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you have your functioning Shiny App up and running, let’s take a closer look at our files and directories. Notice that the app.R file has been created within a directory. It is important to remember that only the files within this directory will be accessible to the app when it is online. Taking a look at the app.R file, we can see that there are four necessary elements in this file that create the working app:</p>
<ul>
<li>First, it calls <strong>library(shiny)</strong>
</li>
<li>Then, it defines a user interface with <strong>ui &lt;- fluidPage(…)</strong>
</li>
<li>It also defines server logic, which takes in an input from the UI, and produces an output based on that input, as defined by <strong>server &lt;- function(input, output) {…}</strong>
</li>
<li>Finally, it calls <strong>shinyApp(ui, server)</strong> to run the app.</li>
</ul>
<div id="setting-up-the-basic-ui" class="section level3 unnumbered">
<h3>Setting Up the Basic UI<a class="anchor" aria-label="anchor" href="#setting-up-the-basic-ui"><i class="fas fa-link"></i></a>
</h3>
<p>According to the Preceptor, the Gov 1005 Final Projects should be formatted such that they have three tabs, as well as an embedded video. A basic set up for that might be something like this:</p>
<div class="sourceCode" id="cb908"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb908-1"><a href="shiny.html#cb908-1" aria-hidden="true" tabindex="-1"></a>ui &lt;- navbarPage(</span>
<span id="cb908-2"><a href="shiny.html#cb908-2" aria-hidden="true" tabindex="-1"></a>  "Final Project Title",</span>
<span id="cb908-3"><a href="shiny.html#cb908-3" aria-hidden="true" tabindex="-1"></a>  tabPanel("Model",</span>
<span id="cb908-4"><a href="shiny.html#cb908-4" aria-hidden="true" tabindex="-1"></a>           fluidPage(</span>
<span id="cb908-5"><a href="shiny.html#cb908-5" aria-hidden="true" tabindex="-1"></a>              titlePanel("Model Title"),</span>
<span id="cb908-6"><a href="shiny.html#cb908-6" aria-hidden="true" tabindex="-1"></a>              sidebarLayout(</span>
<span id="cb908-7"><a href="shiny.html#cb908-7" aria-hidden="true" tabindex="-1"></a>                  sidebarPanel(</span>
<span id="cb908-8"><a href="shiny.html#cb908-8" aria-hidden="true" tabindex="-1"></a>                      selectInput(</span>
<span id="cb908-9"><a href="shiny.html#cb908-9" aria-hidden="true" tabindex="-1"></a>                          "plot_type",</span>
<span id="cb908-10"><a href="shiny.html#cb908-10" aria-hidden="true" tabindex="-1"></a>                          "Plot Type",</span>
<span id="cb908-11"><a href="shiny.html#cb908-11" aria-hidden="true" tabindex="-1"></a>                          c("Option A" = "a", "Option B" = "b")</span>
<span id="cb908-12"><a href="shiny.html#cb908-12" aria-hidden="true" tabindex="-1"></a>                      )),</span>
<span id="cb908-13"><a href="shiny.html#cb908-13" aria-hidden="true" tabindex="-1"></a>                  mainPanel(plotOutput("line_plot")))</span>
<span id="cb908-14"><a href="shiny.html#cb908-14" aria-hidden="true" tabindex="-1"></a>             )),</span>
<span id="cb908-15"><a href="shiny.html#cb908-15" aria-hidden="true" tabindex="-1"></a>  tabPanel("Discussion",</span>
<span id="cb908-16"><a href="shiny.html#cb908-16" aria-hidden="true" tabindex="-1"></a>           titlePanel("Discussion Title"),</span>
<span id="cb908-17"><a href="shiny.html#cb908-17" aria-hidden="true" tabindex="-1"></a>           p("Tour of the modeling choices you made and </span>
<span id="cb908-18"><a href="shiny.html#cb908-18" aria-hidden="true" tabindex="-1"></a>              an explanation of why you made them")),</span>
<span id="cb908-19"><a href="shiny.html#cb908-19" aria-hidden="true" tabindex="-1"></a>  tabPanel("About", </span>
<span id="cb908-20"><a href="shiny.html#cb908-20" aria-hidden="true" tabindex="-1"></a>          titlePanel("About"),</span>
<span id="cb908-21"><a href="shiny.html#cb908-21" aria-hidden="true" tabindex="-1"></a>          h3("Project Background and Motivations"),</span>
<span id="cb908-22"><a href="shiny.html#cb908-22" aria-hidden="true" tabindex="-1"></a>          p("Hello, this is where I talk about my project."),</span>
<span id="cb908-23"><a href="shiny.html#cb908-23" aria-hidden="true" tabindex="-1"></a>          h3("About Me"),</span>
<span id="cb908-24"><a href="shiny.html#cb908-24" aria-hidden="true" tabindex="-1"></a>          p("My name is ______ and I study ______. </span>
<span id="cb908-25"><a href="shiny.html#cb908-25" aria-hidden="true" tabindex="-1"></a>             You can reach me at ______@college.harvard.edu.")))</span></code></pre></div>
<p>You can run the example app in this repo to see this code in action. Breaking this code down, we have created a navigation bar page with three tabs. The first tab will display the model, and has two potential input options, Option A or Option B. This can be customized based on your model, and the number of inputs desired. Note that this is wrapped inside of a <strong>fluidPage()</strong>, which simply creates a basic page layout that can support rows and columns if so desired. Breaking down this tab further, we have <strong>sidebarLayout()</strong> defining the layout of this page with a sidebar panel and a main panel. Within the sidebar panel, we have inserted a <strong>selectInput</strong>, which will allow us to have reactive pages.</p>
<p>Note that I have used HTML formatting for the Discussion and About pages.</p>
</div>
<div id="setting-up-the-server" class="section level3 unnumbered">
<h3>Setting up the Server<a class="anchor" aria-label="anchor" href="#setting-up-the-server"><i class="fas fa-link"></i></a>
</h3>
<p>The server function is where we perform our backend logic for our app. We can put any R code there to create plots or tables as needed. The inputs come from UI definitions, like <strong>selectInput()</strong> or <strong>sliderInput()</strong>. In our UI example, we used a select input named “plot_type,” which had two options: A or B. The outputs are defined within the server function, and then rendered as defined in the UI. In our UI example, we want to render a <strong>plotOutput</strong> named “line_plot.”</p>
<p>So our server function would ideally use the <strong>plot_type</strong> input to create a <strong>line_plot</strong>. An example of a basic server function might be something like this:</p>
<div class="sourceCode" id="cb909"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb909-1"><a href="shiny.html#cb909-1" aria-hidden="true" tabindex="-1"></a>server &lt;- function(input, output) {</span>
<span id="cb909-2"><a href="shiny.html#cb909-2" aria-hidden="true" tabindex="-1"></a>    output$line_plot &lt;- renderPlot({</span>
<span id="cb909-3"><a href="shiny.html#cb909-3" aria-hidden="true" tabindex="-1"></a>        # Generate type based on input$plot_type from ui</span>
<span id="cb909-4"><a href="shiny.html#cb909-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb909-5"><a href="shiny.html#cb909-5" aria-hidden="true" tabindex="-1"></a><span class="in">        ifelse(</span></span>
<span id="cb909-6"><a href="shiny.html#cb909-6" aria-hidden="true" tabindex="-1"></a><span class="in">            input$plot_type == "a",</span></span>
<span id="cb909-7"><a href="shiny.html#cb909-7" aria-hidden="true" tabindex="-1"></a><span class="in">            </span></span>
<span id="cb909-8"><a href="shiny.html#cb909-8" aria-hidden="true" tabindex="-1"></a><span class="in">            # If input$plot_type is "a", plot histogram of "waiting" column </span></span>
<span id="cb909-9"><a href="shiny.html#cb909-9" aria-hidden="true" tabindex="-1"></a><span class="in">            # from the faithful dataframe</span></span>
<span id="cb909-10"><a href="shiny.html#cb909-10" aria-hidden="true" tabindex="-1"></a><span class="in">            </span></span>
<span id="cb909-11"><a href="shiny.html#cb909-11" aria-hidden="true" tabindex="-1"></a><span class="in">            x   &lt;- faithful[, 2],</span></span>
<span id="cb909-12"><a href="shiny.html#cb909-12" aria-hidden="true" tabindex="-1"></a><span class="in">            </span></span>
<span id="cb909-13"><a href="shiny.html#cb909-13" aria-hidden="true" tabindex="-1"></a><span class="in">            # If input$plot_type is "b", plot histogram of "eruptions" column</span></span>
<span id="cb909-14"><a href="shiny.html#cb909-14" aria-hidden="true" tabindex="-1"></a><span class="in">            # from the faithful dataframe</span></span>
<span id="cb909-15"><a href="shiny.html#cb909-15" aria-hidden="true" tabindex="-1"></a><span class="in">            </span></span>
<span id="cb909-16"><a href="shiny.html#cb909-16" aria-hidden="true" tabindex="-1"></a><span class="in">            x   &lt;- faithful[, 1]</span></span>
<span id="cb909-17"><a href="shiny.html#cb909-17" aria-hidden="true" tabindex="-1"></a><span class="in">        )</span></span>
<span id="cb909-18"><a href="shiny.html#cb909-18" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb909-19"><a href="shiny.html#cb909-19" aria-hidden="true" tabindex="-1"></a><span class="in">        # Draw the histogram with the specified number of bins</span></span>
<span id="cb909-20"><a href="shiny.html#cb909-20" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb909-21"><a href="shiny.html#cb909-21" aria-hidden="true" tabindex="-1"></a><span class="in">        hist(x, col = 'darkgray', border = 'white')</span></span>
<span id="cb909-22"><a href="shiny.html#cb909-22" aria-hidden="true" tabindex="-1"></a><span class="in">    })</span></span>
<span id="cb909-23"><a href="shiny.html#cb909-23" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="organization" class="section level2 unnumbered">
<h2>Organization<a class="anchor" aria-label="anchor" href="#organization"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have the basic app running, let’s talk about organization. One common problem that shows up a lot is that people tend to throw all of their code into their app.R file, causing it to grow to be hundreds or even thousands of lines of code long. This happens easily because not only can backend logic be written into the server function, but additionally entire HTML or markdown pages can be formatted in the UI section. Here are a few ways to stop the app.R file from becoming incredibly messy.</p>
<ul>
<li>First, you can put all large blocks of text into separate files. For example, we could take the HTML formatting from the “About” tab section and put it into a separate about.html file, or similarly format the same section using markdown. Then you would simply use the shiny function <strong>includeHTML()</strong> or <strong>includeMarkdown()</strong> to insert your file contents.</li>
<li>Second, put as much prep work as possible into a separate (or multiple separate) R file. This is helpful for readability, as it will generate more small files, but it is also helpful in that the app will not have to run all of the heavy prep calculations while it’s trying to load. For this, a tip is to perform heavy operations in a document titled prep-shiny.R, for example, and to save any helpful outputs as graphic images or gifs, or as rds files that can then be loaded into the app.R file.</li>
<li>Third, keep your repository clean. Do not save unneccessary raw data files or the like to your repository, as this may just create clutter. Make sure to update your .gitignore file with anything that you would not like to have on your Github repository or on the Shiny App. This includes the .Rproj file, raw data files, and cache files.</li>
</ul>
</div>
<div id="customizations" class="section level2 unnumbered">
<h2>Customizations<a class="anchor" aria-label="anchor" href="#customizations"><i class="fas fa-link"></i></a>
</h2>
<p>Finally, we can take a look at a simple way to customize the look of your Shiny App. The package <strong>shinythemes</strong> can easily be added to give your app a theme. The <a href="http://rstudio.github.io/shinythemes/">shinythemes website</a> displays the various themes quite nicely, and you can use the <a href="https://shiny.rstudio.com/gallery/shiny-theme-selector.html">theme selector</a> to click through different themes.</p>
<p>The <a href="https://shiny.rstudio.com/gallery/">Shiny gallery</a> is helpful for browsing through different layouts and types of visualization for inspiration.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="functions.html">Functions</a></div>
<div class="next"><a href="maps.html">Maps</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#shiny">Shiny</a></li>
<li><a class="nav-link" href="#helpful-resources">Helpful Resources</a></li>
<li><a class="nav-link" href="#set-up-and-getting-started">Set Up and Getting Started</a></li>
<li>
<a class="nav-link" href="#building-your-basic-app">Building Your Basic App</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#setting-up-the-basic-ui">Setting Up the Basic UI</a></li>
<li><a class="nav-link" href="#setting-up-the-server">Setting up the Server</a></li>
</ul>
</li>
<li><a class="nav-link" href="#organization">Organization</a></li>
<li><a class="nav-link" href="#customizations">Customizations</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/PPBDS/primer/blob/master/shiny.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/PPBDS/primer/edit/master/shiny.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Preceptor’s Primer for Bayesian Data Science</strong>" was written by David Kane. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
