<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 6 One Parameter | Preceptor’s Primer for Bayesian Big Data Science</title>
<meta name="author" content="David Kane">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.5.3/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.2.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Preceptor’s Primer for Bayesian Big Data Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="preamble.html">Preamble</a></li>
<li><a class="" href="shopping-week.html">Shopping Week</a></li>
<li><a class="" href="visualization.html"><span class="header-section-number">1</span> Visualization</a></li>
<li><a class="" href="wrangling.html"><span class="header-section-number">2</span> Wrangling</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">3</span> Functions</a></li>
<li><a class="" href="rubin-causal-model.html"><span class="header-section-number">4</span> Rubin Causal Model</a></li>
<li><a class="" href="probability.html"><span class="header-section-number">5</span> Probability</a></li>
<li><a class="active" href="one-parameter.html"><span class="header-section-number">6</span> One Parameter</a></li>
<li><a class="" href="two-parameters.html"><span class="header-section-number">7</span> Two Parameters</a></li>
<li><a class="" href="three-parameters.html"><span class="header-section-number">8</span> Three Parameters</a></li>
<li><a class="" href="four-parameters.html"><span class="header-section-number">9</span> Four Parameters</a></li>
<li><a class="" href="five-parameters.html"><span class="header-section-number">10</span> Five Parameters</a></li>
<li><a class="" href="n-parameters.html"><span class="header-section-number">11</span> N Parameters</a></li>
<li><a class="" href="case-studies.html"><span class="header-section-number">12</span> Case Studies</a></li>
<li><a class="" href="tools.html">Tools</a></li>
<li><a class="" href="shiny.html">Shiny</a></li>
<li><a class="" href="maps.html">Maps</a></li>
<li><a class="" href="ipums.html">IPUMS</a></li>
<li><a class="" href="animation.html">Animation</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/PPBDS/primer">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="one-parameter" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> One Parameter<a class="anchor" aria-label="anchor" href="#one-parameter"><i class="fas fa-link"></i></a>
</h1>
<!-- Priorities:  -->
<!-- Need some discussion of the Cardinal Virtues, even just a brief reminder in the Discussion section. MF: Should this go through each virtue and apply it to the urn? Or should we only mention the virtues? Yes. In 6.4.4, about 4 paragraphs. -->
<!-- All references to estimating the number of red beads should be change to estimating p, the proportion of red beads.  Or, just make clear a couple of times that they are the same thing. And that we "pretend" that p is continuous even though, stritcly speaking it is not. -->
<!-- Could not get figure references to work. They have been removed. But we ought to figure that out and add them back!  Should create a simple example (three line Rmd file) and then ask on RStudio Community.  -->
<!-- Fix up Maslow. -->
<!-- Put these two in the Summary: -->
<!-- Does this belong in the Summary? There is a truth! There is a true value for p which we do not know! We want to create a posterior probability distribution which summarizes our knowledge. We care about the posterior probability distribution of p.  The center of that distribution is around the mean or median of the proportion in your sample. The sd (or mad) of that posterior is this formula! Give standard error formula. Note that this is the same thing as the standard deviation of the repeated samples! -->
<!-- p (the truth) -> to $\hat{p}$  (my estimate) -> to the standard error of $\hat{p}$ (black box of math mumbo jumbo and computer simulation magic; details of the box and how it works do not matter!) -> to our posterior probability distribution for p (your beliefs about the truth). Yellow brick road? Wizard of Posterior? At least a paragraph of text going through this. Maybe as the start of the Summary. Current Key Lesson is not Key! -->
<!-- You must understand what the standard error of $\hat{p}$ means. You do not need to understand why. -->
<!-- In the Functions are your friend! section -->
<!-- The variation in p-hat (when we do 1,000 reps) decreases as shovel size increases. For each shovel size, you plot 1,000 points. Small shovels have lots of overlap, so, use alpha. Even big shovels only have scores of possible p-hats. Then, say, can we measure the decrease in varition more precisely then just looking at this cloud of points? Yes! Plot the standard deviation of the cloud for each shovel size. -->
<!-- Maybe make it a gganimation? -->
<!-- Explain in a comment the reason for  fun = function(.x) 1/(2 * sqrt(.x)) in the plot. I don't know why we need the 2. We would probably use geom_function(). Maybe using geom_function with the function for a standard error will just magically work! -->
<!-- Put Hyppthesis section right before using the posterior. Give a clear two paragraph description of hyppthesis test. "Traditionally, most scientific papers are not so much interested in estimating p. They are interested in testing specific hypotheses." Explain it exactly the way that Khan explains it. -->
<!-- Cover most of the points here: https://ppbds.github.io/primer/five-parameters.html#testing. One hypothesis: There are equal number of red and white beads in the urn. Can we reject that hypothesis? Convention: if the 95% confidence interval excludes the null hypthesis, then we reject it. Otherwise, we don't reject it. (Not we accept it.)  -->
<!-- Who cares! Rejecting or not rejecting hypotheses never helps us to answer real questions. In general, null hypthoses are never true. A big enough will always reject the null hypothesis. So, it is not that interesting.  -->
<!-- Another paragraph or two of discussion about the final posterior. How do we use it? Within what range would you offer 50/50 odds that the true percentage lies? (use quantile(0.25, 0.75). Area under the curve? Explain clearly how that 26% is calculated. What is post_dist? What does it mean? How can I use it? Maybe show it sorted? Add some code comments. -->
<!-- Add a second posterior plot with all the results with red > 8 colored red. *Each question requires looking at a new area under the curve.* When someones asks you a question, they are doing two things. First, they are providing instructions as to the posterior your should create. (Shovel with 20 spots.) Second, they are asking a question about the area under the curve in a specific region. -->
<!-- A paragraph about the distinction between distributions and probability distributions. We often can work with the former till the very end. When answering most questions, I can just work with the "raw" distribution. I don't need the posterior probability distribution. -->
<!-- Also, no need for sample_n(10) when looking at post_dist, I think. So, just look at first ten. Then discuss the size of post_dist, which will be some random number like 2,567. -->
<!-- 1) Make a 15 second video, put it on YouTube. "We don't estimate parameters because we care about parameters. Parameters are imaginary! Like unicorns! [Put finger on forehead and imitate unicorn.] We estimate parameters to build Data Generating Mechanisms. And with a DGM, you can move the world!" NOTE: will do when I can get access to better internet. -->
<!-- Working on getting rid of the axis labels in the slice rayshader (even though I took them out in ggplot, they are staying). -->
<iframe src="https://www.youtube.com/embed/e3PJ3Du_zDc?showcase=0" width="100%" height="400px">
</iframe>
<p>This scene is from <em>The Hunger Games</em>, a dystopian novel in which children are selected via lottery to fight to the death. Primrose Everdeen is selected from the urn. Why does she have the misfortune of being selected? Or, as we will refer to it henceforth, sampled?</p>
<div class="figure">
<span id="fig:unnamed-chunk-420"></span>
<img src="06-one-parameter/images/danny_sampling.png" alt="Mr. DeVito is correct: sampling *is* badass." width="100%"><p class="caption">
FIGURE 6.1: Mr. DeVito is correct: sampling <em>is</em> badass.
</p>
</div>
<!-- DK: Clean up this text. Give a better sense of the whole chapter. -->
<p>Last chapter, we learned about probability, the act of quantifying uncertainty. This chapter, we will learn about <em>sampling</em>, the beginning of our journey toward inference. When we sample, we take a <em>portion</em> of a total population and attempt to draw a conclusion about the portion, a conclusion which we can then <em>generalize</em> to the entire population.</p>
<p>The urn has a certain number of red and a certain number of white beads all of equal size, mixed well together. What proportion of this urn’s beads are red? That is, what is the value of <span class="math inline">\(p\)</span>?</p>
<div class="figure">
<span id="fig:unnamed-chunk-421"></span>
<img src="06-one-parameter/images/sampling_bowl_1.jpg" alt="An urn with red and white beads." width="100%"><p class="caption">
FIGURE 6.2: An urn with red and white beads.
</p>
</div>
<p>One way to answer this question would be to perform an exhaustive count: remove each bead individually, count the number of red beads, count the number of white beads, and divide the number of red beads by the total number of beads. Call that ratio <span class="math inline">\(p\)</span>, the proportion of red beads in the urn. However, this would be a long and tedious process. Therefore, we will use sampling! Consider two questions:</p>
<p><em>If we get 17 red beads in a random sample of size 50 taken from an urn, what proportion <span class="math inline">\(p\)</span> of the beads in the urn are red?</em></p>
<p><em>What is the probability, using the same urn, that we will draw more than 8 red beads if we use a shovel of size 20?</em></p>
<!-- ADD A SECTION BRIEFING THE REST OF THE CHAPTER DK: YES!-->
<p>Use the <strong>tidyverse</strong> package.</p>
<div class="sourceCode" id="cb565"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<div id="sampling-activity" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Real sampling activity<a class="anchor" aria-label="anchor" href="#sampling-activity"><i class="fas fa-link"></i></a>
</h2>
<div class="figure">
<span id="fig:unnamed-chunk-423"></span>
<img src="06-one-parameter/images/sampling_bowl_1.jpg" alt="An urn with red and white beads." width="100%"><p class="caption">
FIGURE 6.3: An urn with red and white beads.
</p>
</div>
<div id="using-the-shovel-method-once" class="section level3" number="6.1.1">
<h3>
<span class="header-section-number">6.1.1</span> Using the shovel method once<a class="anchor" aria-label="anchor" href="#using-the-shovel-method-once"><i class="fas fa-link"></i></a>
</h3>
<p>Instead of performing an exhaustive count, let’s insert a shovel into the urn and remove <span class="math inline">\(5 \cdot 10 = 50\)</span> beads. We are taking a <em>sample</em> of the total population of beads.</p>
<div class="figure">
<span id="fig:unnamed-chunk-424"></span>
<img src="06-one-parameter/images/sampling_bowl_2.jpg" alt="Inserting a shovel into the urn." width="100%"><p class="caption">
FIGURE 6.4: Inserting a shovel into the urn.
</p>
</div>
<div class="figure">
<span id="fig:unnamed-chunk-425"></span>
<img src="06-one-parameter/images/sampling_bowl_3_cropped.jpg" alt="Removing 50 beads from the urn." width="100%"><p class="caption">
FIGURE 6.5: Removing 50 beads from the urn.
</p>
</div>
<p>Observe that 17 of the 50 sampled beads are red and thus 17/50 = 0.34 = 34% of the shovel’s beads are red. We can view the proportion of beads that are red in this shovel as a guess of the proportion of beads that are red in the entire urn. While not as exact as doing an exhaustive count of all the beads in the urn, our guess of 34% took much less time and energy to make.</p>
<p>Recall that <span class="math inline">\(p\)</span> is the true value of the proportion of red beads. There is only one <span class="math inline">\(p\)</span>. Our guesses at the proportion of red beads are known as <span class="math inline">\(\hat{p}\)</span>, where <span class="math inline">\(\hat{p}\)</span> is the estimated value of <span class="math inline">\(p\)</span> which comes from taking a sample. There can be an infinite number of <span class="math inline">\(\hat{p}\)</span>.</p>
<p>Imagine that we started this activity over from the beginning, replacing the 50 beads back into the urn and starting over. Would we remove exactly 17 red beads? Maybe?</p>
<p>What if we repeated this activity <em>many</em> times? Would our guess at the proportion of the urn’s beads that are red, <span class="math inline">\(\hat{p}\)</span>, be exactly 34% every time? Surely not.</p>
<p>Let’s repeat this exercise with the help of 33 groups of friends to understand how the value varies across 33 independent trials.</p>
</div>
<div id="student-shovels" class="section level3" number="6.1.2">
<h3>
<span class="header-section-number">6.1.2</span> Using the shovel 33 times<a class="anchor" aria-label="anchor" href="#student-shovels"><i class="fas fa-link"></i></a>
</h3>
<p>Each of our 33 groups of friends will do the following:</p>
<ul>
<li>Use the shovel to remove 50 beads each.</li>
<li>Count the number of red beads and compute the proportion of the 50 beads that are red.</li>
<li>Return the beads into the urn.</li>
<li>Mix the contents of the urn to not let a previous group’s results influence the next group’s.</li>
</ul>
<p>Each of our 33 groups of friends make note of their proportion of red beads from their sample collected. Each group then marks their proportion of their 50 beads that were red in the appropriate bin in a hand-drawn histogram as seen below.</p>
<div class="figure">
<span id="fig:unnamed-chunk-426"></span>
<img src="06-one-parameter/images/tactile_3_a.jpg" alt="Constructing a histogram of proportions." width="100%"><p class="caption">
FIGURE 6.6: Constructing a histogram of proportions.
</p>
</div>
<p>Histograms allow us to visualize the <em>distribution</em> of a numerical variable. In particular, where the center of the values falls and how the values vary. A partially completed histogram of the first 10 out of 33 groups of friends’ results can be seen in the figure below.</p>
<div class="figure">
<span id="fig:unnamed-chunk-427"></span>
<img src="06-one-parameter/images/tactile_3_c.jpg" alt="Hand-drawn histogram of first 10 out of 33 proportions." width="100%"><p class="caption">
FIGURE 6.7: Hand-drawn histogram of first 10 out of 33 proportions.
</p>
</div>
<p>Observe the following details in the histogram:</p>
<ul>
<li>At the low end, one group removed 50 beads from the urn with proportion red between 0.20 and 0.25.</li>
<li>At the high end, another group removed 50 beads from the urn with proportion between 0.45 and 0.5 red.</li>
<li>However, the most frequently occurring proportions were between 0.30 and 0.35 red, right in the middle of the distribution.</li>
<li>The distribution is somewhat bell-shaped.</li>
</ul>
<p><code>tactile_sample_urn</code> saves the results from our 33 groups of friends.</p>
<pre><code>## # A tibble: 33 x 4
##    group         red_beads prop_red    ID
##    &lt;chr&gt;             &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
##  1 Mal, Francis         17     0.34     1
##  2 Nam, Joshua          19     0.38     2
##  3 Mark, Ramses         21     0.42     3
##  4 Maeve, Josh          18     0.36     4
##  5 Morgan, Emily        21     0.42     5
##  6 Ace, Chris           18     0.36     6
##  7 Mia, James           15     0.3      7
##  8 Griffin, Mary        18     0.36     8
##  9 Yuki, Harry          21     0.42     9
## 10 Frank, Clara         21     0.42    10
## # … with 23 more rows</code></pre>
<p>For each <code>group</code>, we are given their names, the number of <code>red_beads</code> they obtained, and the corresponding proportion out of 50 beads that were red, called <code>prop_red</code>. We also have an <code>ID</code> variable which gives each of the 33 groups a unique identifier. Each row can be viewed as one instance of a replicated activity: using the shovel to remove 50 beads and computing the proportion of those beads that are red.</p>
<p>Let’s visualize the distribution of these 33 proportions using <code>geom_histogram()</code> with <code>binwidth = 0.05</code>. This is a computerized and complete version of the partially completed hand-drawn histogram you saw earlier. Setting boundary = 0.4 indicates that we want a binning scheme such that one of the bins’ boundary is at 0.4. <code>color = "white"</code> modifies the color of the boundary for visual clarity.</p>
<div class="sourceCode" id="cb567"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tactile_sample_urn</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.05</span>, 
                 boundary <span class="op">=</span> <span class="fl">0.4</span>, 
                 color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  
  <span class="co"># Add scale_y_continuous with breaks by </span>
  <span class="co"># 1, as the default shows the y-axis from</span>
  <span class="co"># 1 to 10 with breaks at .5. Breaks by 1 </span>
  <span class="co"># is better for this plot, as all resulting </span>
  <span class="co"># values are integers. </span>
  
  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">10</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  
  <span class="co"># The call expression() is used to insert a mathematical</span>
  <span class="co"># expression, like p-hat. The paste after expression allows </span>
  <span class="co"># us to paste text prior to said expression. </span>
  
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Proportion of 50 beads that were red "</span>, <span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">hat</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
       y <span class="op">=</span> <span class="st">"Count"</span>,
       title <span class="op">=</span> <span class="st">"Proportions Red in 33 Samples"</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-429-1.png" width="100%"></div>
</div>
<div id="what-did-we-just-do" class="section level3" number="6.1.3">
<h3>
<span class="header-section-number">6.1.3</span> What did we just do?<a class="anchor" aria-label="anchor" href="#what-did-we-just-do"><i class="fas fa-link"></i></a>
</h3>
<p>What we just demonstrated in this activity is the statistical concept of <strong>sampling</strong>. We want to know the proportion of the urn’s beads that are red. Performing an exhaustive count of the red and white beads would be time-consuming. Therefore, we extracted a <em>sample</em> of 50 beads using the shovel. Using this sample of 50 beads, we estimated the proportion of the urn’s beads that are red to be 34%.</p>
<p>Moreover, because we mixed the beads before each use of the shovel, the samples were randomly drawn. Because each sample was drawn at random, the samples were different from each other. Because the samples were different from each other, we obtained the different proportions red observed in the previous histogram. This is known as the concept of <em>sampling variation</em>.</p>
<p>In Section <a href="one-parameter.html#virtual-sampling">6.2</a>, we’ll mimic the hands-on sampling activity we just performed on a computer. This will allow us not only to repeat the sampling exercise much more than 33 times, but it will also allow us to use shovels with different numbers of slots than just 50.</p>
<p>Afterwards, we’ll present you with definitions, terminology, and notation related to sampling in Section <a href="one-parameter.html#standard-errors">6.3</a>. As in many disciplines, such necessary background knowledge may seem confusing at first. However, if you truly understand the underlying concepts and practice, you’ll be able to master them.</p>
<p>To tie the contents of this chapter to the real world, we’ll present an example of one of the most common uses of sampling: polls. In Section <a href="one-parameter.html#sampling-case-study">6.5.3</a> we’ll look at a particular case study: a 2013 poll on then U.S. President Barack Obama’s popularity among young Americans, conducted by the Kennedy School’s Institute of Politics at Harvard University.</p>
</div>
</div>
<div id="virtual-sampling" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Virtual sampling<a class="anchor" aria-label="anchor" href="#virtual-sampling"><i class="fas fa-link"></i></a>
</h2>
<p>In the previous Section <a href="one-parameter.html#sampling-activity">6.1</a>, we performed a <em>tactile</em> sampling activity. In other words, we used a physical urn of beads and a physical shovel. We performed this sampling activity by hand so that we could develop a firm understanding of the root ideas behind sampling. In this section, we mimic this tactile sampling activity with a <em>virtual</em> sampling activity using a computer. We have a virtual urn and a virtual shovel.</p>
<div id="using-the-virtual-shovel-once" class="section level3" number="6.2.1">
<h3>
<span class="header-section-number">6.2.1</span> Using the virtual shovel once<a class="anchor" aria-label="anchor" href="#using-the-virtual-shovel-once"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s start by performing the virtual analog of the tactile sampling exercise we performed in Section <a href="one-parameter.html#sampling-activity">6.1</a>. We first need a virtual analog of the urn seen in the beginning of our chapter. To this end, we create a tibble named <code>urn</code>. The rows of <code>urn</code> correspond exactly with the contents of the actual urn.</p>
<p>For reference, <code>sample_frac()</code> merely re-arranges the rows of the tibble. We use <code><a href="https://rdrr.io/r/base/Random.html">set.seed()</a></code> to ensure that the beads in our virtual urn are always in the same order. This ensures that the figures in the book match their written descriptions.</p>
<div class="sourceCode" id="cb568"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="va">urn</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="fl">400</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"white"</span>, <span class="fl">600</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">sample_frac</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="va">color</span><span class="op">)</span>

<span class="va">urn</span>  </code></pre></div>
<pre><code>## # A tibble: 1,000 x 2
##       ID color
##    &lt;int&gt; &lt;chr&gt;
##  1     1 white
##  2     2 white
##  3     3 red  
##  4     4 red  
##  5     5 white
##  6     6 white
##  7     7 white
##  8     8 white
##  9     9 white
## 10    10 white
## # … with 990 more rows</code></pre>
<p>Observe that <code>urn</code> has 1,000 rows, meaning that the urn contains
1,000 equally-sized beads. The first variable <code>ID</code> is used as an <em>identification variable</em>; none of the beads in the actual urn are marked with numbers. The second variable <code>color</code> indicates whether a particular virtual bead is red or white. View the contents of the urn in RStudio’s data viewer and scroll through the contents to convince yourself that <code>urn</code> is indeed a virtual analog of the actual urn.</p>
<p>Note that, in this chapter, we have used the variable <code>ID</code> in two different ways: first, to keep track of the samples drawn by the 33 individual teams and, second, to keep track of the
1,000 beads in our virtual urn. And that is OK! <code>ID</code> means the same concept in both cases. We will need to be careful, however, when working with more than one table which has an <code>ID</code> column. In that case, we will rename one of the columns in order to avoid conflicts.</p>
<p>Now that we have a virtual analog of our urn, we need a virtual analog of the shovel seen in Figure 6.2 to generate virtual samples of 50 beads. We’re going to use <code>sample_n()</code> and list-columns.</p>
<p>Let’s take a sample of 50 beads from our virtual urn.</p>
<div class="sourceCode" id="cb570"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define ID as 1 to look at one example of drawing</span>
<span class="co"># fifty beads. When ID is called within map(), we</span>
<span class="co"># are performing sample_n() upon our urn once (ID</span>
<span class="co"># = 1) and taking a sample of 50 beads.</span>

<span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##      ID shovel           
##   &lt;dbl&gt; &lt;list&gt;           
## 1     1 &lt;tibble [50 × 2]&gt;</code></pre>
<p>As usual, map functions and list-columns are powerful but confusing.</p>
<!-- DK: Walk through that code slowly. And through the output object at the end. Show that the tibble lives inside. -->
<p>Let’s compute the proportion of beads in our virtual sample that are red. First, add a column which indicates the number of red beads.</p>
<div class="sourceCode" id="cb572"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##      ID shovel            numb_red
##   &lt;dbl&gt; &lt;list&gt;               &lt;int&gt;
## 1     1 &lt;tibble [50 × 2]&gt;       16</code></pre>
<!-- DK: Explain `.$color == "red"`.  -->
<p>Why does this work? Because R treats <code>TRUE</code> like the number <code>1</code> and <code>FALSE</code> like the number <code>0</code>. So summing the number of <code>TRUE</code>s and <code>FALSE</code>s is equivalent to summing <code>1</code>’s and <code>0</code>’s. In the end, this operation counts the number of beads where <code>color</code> is <code>red</code>.</p>
<p>Second, add a column for the total number of beads. (We already “know” that this is 50, but it never hurts to make our code more general.)</p>
<div class="sourceCode" id="cb574"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##      ID shovel            numb_red numb_beads
##   &lt;dbl&gt; &lt;list&gt;               &lt;int&gt;      &lt;int&gt;
## 1     1 &lt;tibble [50 × 2]&gt;       20         50</code></pre>
<p>Third, calculate the proportion red:</p>
<div class="sourceCode" id="cb576"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##      ID shovel            numb_red numb_beads prop_red
##   &lt;dbl&gt; &lt;list&gt;               &lt;int&gt;      &lt;int&gt;    &lt;dbl&gt;
## 1     1 &lt;tibble [50 × 2]&gt;       23         50     0.46</code></pre>
<p>Careful readers will note that the <code>numb_red</code> is changing in each example above. The reason, of course, is that each block re-runs the shovel exercise, getting a (potentially) different number of red beads each time. If we wanted the same number in each block, we would need to use <code><a href="https://rdrr.io/r/base/Random.html">set.seed()</a></code> each time, always providing the same <code>seed</code> each time.</p>
<p>Let’s now perform the virtual analog of having 33 groups of students use the sampling shovel!</p>
</div>
<div id="using-the-virtual-shovel-33-times" class="section level3" number="6.2.2">
<h3>
<span class="header-section-number">6.2.2</span> Using the virtual shovel 33 times<a class="anchor" aria-label="anchor" href="#using-the-virtual-shovel-33-times"><i class="fas fa-link"></i></a>
</h3>
<p>In our tactile sampling exercise in Section <a href="one-parameter.html#sampling-activity">6.1</a>, we had 33 groups of students use the shovel, yielding 33 samples of size 50 beads. We then used these 33 samples to compute 33 proportions. We can perform this repeated/replicated sampling virtually by just doing the same thing 33 times.</p>
<p>We’ll save these results in a data frame called <code>virtual_samples</code>.</p>
<div class="sourceCode" id="cb578"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">9</span><span class="op">)</span>

<span class="va">virtual_samples</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">33</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span>

<span class="va">virtual_samples</span></code></pre></div>
<pre><code>## # A tibble: 33 x 5
##       ID shovel            numb_red numb_beads prop_red
##    &lt;int&gt; &lt;list&gt;               &lt;int&gt;      &lt;int&gt;    &lt;dbl&gt;
##  1     1 &lt;tibble [50 × 2]&gt;       21         50     0.42
##  2     2 &lt;tibble [50 × 2]&gt;       19         50     0.38
##  3     3 &lt;tibble [50 × 2]&gt;       17         50     0.34
##  4     4 &lt;tibble [50 × 2]&gt;       15         50     0.3 
##  5     5 &lt;tibble [50 × 2]&gt;       17         50     0.34
##  6     6 &lt;tibble [50 × 2]&gt;       21         50     0.42
##  7     7 &lt;tibble [50 × 2]&gt;        9         50     0.18
##  8     8 &lt;tibble [50 × 2]&gt;       21         50     0.42
##  9     9 &lt;tibble [50 × 2]&gt;       16         50     0.32
## 10    10 &lt;tibble [50 × 2]&gt;       20         50     0.4 
## # … with 23 more rows</code></pre>
<p>Let’s visualize this variation in a histogram:</p>
<div class="sourceCode" id="cb580"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples</span> <span class="op">%&gt;%</span> 
<span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.05</span>, 
                 boundary <span class="op">=</span> <span class="fl">0.4</span>, 
                 color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">hat</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span>,
       y <span class="op">=</span> <span class="st">"Count"</span>,
       title <span class="op">=</span> <span class="st">"Distribution of 33 proportions red"</span><span class="op">)</span> <span class="op">+</span>
  
  <span class="co"># Labels the axes in an attractive fashion. Without this code, </span>
  <span class="co"># the axes labels would include 2.5, which makes no sense because</span>
  <span class="co"># all the values are integers.</span>
  
  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-436-1.png" width="100%"></div>
<p>Note that we add <code>binwidth = 0.05</code> and <code>boundary = 0.4</code> arguments as well. Setting <code>boundary = 0.4</code> ensures a binning scheme with one of the bins’ boundaries at 0.4. Since <code>binwidth = 0.05</code> is also set, this will create bins with boundaries at 0.30, 0.35, 0.45, and so on. Recall that <span class="math inline">\(\hat{p}\)</span> is equal to the proportions red in our samples.</p>
<p>Observe that we occasionally obtained proportions red that are less than 30%. On the other hand, we occasionally obtained proportions that are greater than 45%. However, the most frequently occurring proportions were between 35% and 40%. Why do we have these differences in proportions red? Because of <em>sampling variation</em>.</p>
<p>Compare our virtual results with our tactile results from the previous section. Observe that both histograms are somewhat similar in their center and variation, although not identical. These slight differences are again due to random sampling variation. Furthermore, observe that both distributions are somewhat bell-shaped.</p>
<!-- DK: Clean up this code. Discuss more? -->
<div class="sourceCode" id="cb581"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># bind_rows() takes our data from virtual_samples and </span>
<span class="co"># "binds" it with our data from tactile_sample_urn, resulting</span>
<span class="co"># in one set of data for us to work with. Mutating to create</span>
<span class="co"># the "type" column allows us to see which pieces of data come</span>
<span class="co"># from virtual sampling and which come from tactical sampling.</span>

<span class="va">facet_compare</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">virtual_samples</span> <span class="op">%&gt;%</span> 
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"Virtual sampling"</span><span class="op">)</span>, 
                           <span class="va">tactile_sample_urn</span> <span class="op">%&gt;%</span> 
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ID</span>, red <span class="op">=</span> <span class="va">red_beads</span>, <span class="va">prop_red</span><span class="op">)</span> <span class="op">%&gt;%</span> 
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"Tactile sampling"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># Use mutate() to alter the column factor into a factor</span>
  <span class="co"># column, rather than the default character column. Calling</span>
  <span class="co"># levels() establishes our two "factors". This step is </span>
  <span class="co"># here to help R interpret this column for when we perform </span>
  <span class="co"># our facet_wrap(). </span>
  
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">type</span>, 
                       levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Virtual sampling"</span>, 
                                  <span class="st">"Tactile sampling"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.05</span>, 
                   boundary <span class="op">=</span> <span class="fl">0.4</span>, 
                   color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  
  <span class="co"># facet_wrapping by type creates two different graphs</span>
  <span class="co"># on our plane. The data is separated into two graphs </span>
  <span class="co"># based upon the column after the ~. </span>
  
    <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">type</span><span class="op">)</span> <span class="op">+</span>
  
  <span class="co"># Add an x axis with p-hat using expression() with paste()</span>
  <span class="co"># for clarification on p-hat's meaning. Add an appropriate </span>
  <span class="co"># title and inspect our creation. </span>
  
    <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Proportion of 50 beads that were red "</span>, <span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">hat</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
         title <span class="op">=</span> <span class="st">"Comparing distributions"</span><span class="op">)</span> 

<span class="va">facet_compare</span></code></pre></div>
<div class="figure">
<span id="fig:unnamed-chunk-437"></span>
<img src="book_temp_files/figure-html/unnamed-chunk-437-1.png" alt="Comparing 33 virtual and 33 tactile proportions red. Note that, though the figures differ slightly, both are centered around .35 to .40. This shows that, in both sampling distributions, the most frequently occuring proportion red is between 35 and 40%." width="100%"><p class="caption">
FIGURE 6.8: Comparing 33 virtual and 33 tactile proportions red. Note that, though the figures differ slightly, both are centered around .35 to .40. This shows that, in both sampling distributions, the most frequently occuring proportion red is between 35 and 40%.
</p>
</div>
</div>
<div id="shovel-1000-times" class="section level3" number="6.2.3">
<h3>
<span class="header-section-number">6.2.3</span> Using the virtual shovel 1,000 times<a class="anchor" aria-label="anchor" href="#shovel-1000-times"><i class="fas fa-link"></i></a>
</h3>
<div class="figure">
<span id="fig:unnamed-chunk-438"></span>
<img src="06-one-parameter/images/sample_bernie.png" alt="So much sampling, so little time." width="100%"><p class="caption">
FIGURE 6.9: So much sampling, so little time.
</p>
</div>
<p>Now say we want to study the effects of sampling variation not for 33 samples, but for a larger number of samples (1000). We have two choices at this point. We could have our groups of friends manually take 1,000 samples of 50 beads and compute the corresponding 1,000 proportions. However, this would be time-consuming. This is where computers excel: automating long and repetitive tasks while performing them quickly. At this point, we will abandon tactile sampling in favor of virtual sampling.</p>
<div class="sourceCode" id="cb582"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">9</span><span class="op">)</span>

<span class="va">virtual_samples</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span>

<span class="va">virtual_samples</span></code></pre></div>
<pre><code>## # A tibble: 1,000 x 5
##       ID shovel            numb_red numb_beads prop_red
##    &lt;int&gt; &lt;list&gt;               &lt;int&gt;      &lt;int&gt;    &lt;dbl&gt;
##  1     1 &lt;tibble [50 × 2]&gt;       21         50     0.42
##  2     2 &lt;tibble [50 × 2]&gt;       19         50     0.38
##  3     3 &lt;tibble [50 × 2]&gt;       17         50     0.34
##  4     4 &lt;tibble [50 × 2]&gt;       15         50     0.3 
##  5     5 &lt;tibble [50 × 2]&gt;       17         50     0.34
##  6     6 &lt;tibble [50 × 2]&gt;       21         50     0.42
##  7     7 &lt;tibble [50 × 2]&gt;        9         50     0.18
##  8     8 &lt;tibble [50 × 2]&gt;       21         50     0.42
##  9     9 &lt;tibble [50 × 2]&gt;       16         50     0.32
## 10    10 &lt;tibble [50 × 2]&gt;       20         50     0.4 
## # … with 990 more rows</code></pre>
<p>Observe that we now have 1,000 replicates of <code>prop_red</code>, the proportion of 50 beads that are red. Using the same code as earlier, let’s now visualize the distribution of these 1,000 replicates of <code>prop_red</code> in a histogram:</p>
<div class="sourceCode" id="cb584"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.01</span>, 
                   boundary <span class="op">=</span> <span class="fl">0.4</span>, 
                   color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">hat</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span>, 
         y <span class="op">=</span> <span class="st">"Count"</span>,
         title <span class="op">=</span> <span class="st">"Distribution of 1,000 proportions red"</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-440-1.png" width="100%"></div>
<p>Once again, the most frequently occurring proportions of red beads occur between 35% and 45%. Every now and then, we obtain proportions as low as between 20% and 25%, and others as high as between 55% and 60%. These are rare, however. Furthermore, observe that we now have a much more symmetric and smoother bell-shaped distribution. This distribution is, in fact, approximated well by a normal distribution.</p>
<!-- DK: Discuss why we have missing buckets. -->
</div>
<div id="different-shovels" class="section level3" number="6.2.4">
<h3>
<span class="header-section-number">6.2.4</span> The effect of different shovel sizes<a class="anchor" aria-label="anchor" href="#different-shovels"><i class="fas fa-link"></i></a>
</h3>
<p>Instead of just one shovel, imagine we have three choices of shovels to extract a sample of beads with: shovels of size 25, 50, and 100.</p>
<p>If our goal is to estimate the proportion of the urn’s beads that are red, which shovel would we choose?
Using our newly developed tools for virtual sampling, let’s unpack the effect of having different sample sizes!</p>
<ol style="list-style-type: decimal">
<li>Virtually use the appropriate shovel to generate 1,000 samples with <code>size</code> beads.</li>
<li>Compute the resulting 1,000 replicates of the proportion of the shovel’s beads that are red.</li>
<li>Visualize the distribution of these 1,000 proportions red using a histogram.</li>
</ol>
<p>Start by virtually using the shovel 1000 times. Then, compute the resulting 1000 replicates of proportion red. Finally, plot the distribution using a histogram.</p>
<div class="sourceCode" id="cb585"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples_25</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span>


<span class="va">virtual_samples_25</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.05</span>, 
                 boundary <span class="op">=</span> <span class="fl">0.4</span>, 
                 color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Proportion of 25 beads that were red"</span>, 
       title <span class="op">=</span> <span class="st">"25"</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-441-1.png" width="100%"></div>
<p>We will repeat this process with a shovel size of <strong>50</strong>.</p>
<div class="sourceCode" id="cb586"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples_50</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span>


<span class="va">virtual_samples_50</span>  <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.05</span>, 
                 boundary <span class="op">=</span> <span class="fl">0.4</span>, 
                 color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Proportion of 50 beads that were red"</span>, 
       title <span class="op">=</span> <span class="st">"50"</span><span class="op">)</span>  </code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-442-1.png" width="100%"></div>
<p>Finally, we will perform the same process with 1000 replicates to map the histogram using a shovel size of <strong>100</strong>.</p>
<div class="sourceCode" id="cb587"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples_100</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span>


<span class="va">virtual_samples_100</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.05</span>, 
                 boundary <span class="op">=</span> <span class="fl">0.4</span>, 
                 color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Proportion of 100 beads that were red"</span>, 
       title <span class="op">=</span> <span class="st">"100"</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-443-1.png" width="100%"></div>
<p>For easy comparison, we present the three resulting histograms in a single row with matching x and y axes:</p>
<div class="sourceCode" id="cb588"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use bind_rows to combine the data from our three saved virtual sampling</span>
<span class="co"># objects. Use mutate() in each to clarify the n as the necessary number</span>
<span class="co"># of samples taken. This makes our data easier to interpret and prevents</span>
<span class="co"># duplicate elements.</span>

<span class="va">virtual_prop</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">virtual_samples_25</span> <span class="op">%&gt;%</span> 
                            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">25</span><span class="op">)</span>, 
                          <span class="va">virtual_samples_50</span> <span class="op">%&gt;%</span> 
                            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>, 
                          <span class="va">virtual_samples_100</span> <span class="op">%&gt;%</span> 
                            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Plot our new object with the x-axis showing prop_red. Add elements</span>
<span class="co"># binwidth, boundary, and color for stylistic clarity. Use </span>
<span class="co"># labs() to add an x-axis label and title. Facet_wrap()  </span>
<span class="co"># splits the graph into multiple plots by the variable (~n). </span>

<span class="va">comparing_sampling_distributions</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">virtual_prop</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">prop_red</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.05</span>, boundary <span class="op">=</span> <span class="fl">0.4</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Proportion of shovel's beads that are red"</span>, 
       title <span class="op">=</span> <span class="st">"Comparing distributions of proportions red for three different shovel sizes."</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">n</span><span class="op">)</span> 

<span class="co"># Inspect our new faceted graph. </span>

<span class="va">comparing_sampling_distributions</span></code></pre></div>
<div class="figure">
<span id="fig:unnamed-chunk-444"></span>
<img src="book_temp_files/figure-html/unnamed-chunk-444-1.png" alt="Comparing the distributions of proportion red for different sample sizes (25, 50, 100). The important takeaway is that our center becomes more concentrated as our sample size increases, indicating a smaller standard deviation between our guesses." width="100%"><p class="caption">
FIGURE 6.10: Comparing the distributions of proportion red for different sample sizes (25, 50, 100). The important takeaway is that our center becomes more concentrated as our sample size increases, indicating a smaller standard deviation between our guesses.
</p>
</div>
<p>Observe that as the sample size increases, the variation of the 1,000 replicates of the proportion of red decreases. In other words, as the sample size increases, there are fewer differences due to sampling variation and the distribution centers more tightly around the same value. Eyeballing Figure 6.12, all three histograms appear to center around roughly 40%.</p>
<p>We can be numerically explicit about the amount of variation in our three sets of 1,000 values of <code>prop_red</code> using the <em>standard deviation</em>. A standard deviation is a summary statistic that measures the amount of variation within a numerical variable. For all three sample sizes, let’s compute the standard deviation of the 1,000 proportions red by running the following data wrangling code that uses the <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code> summary function.</p>
<div class="sourceCode" id="cb589"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples_25</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarize</span><span class="op">(</span>sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">prop_red</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop_last'</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       sd
##    &lt;dbl&gt;
## 1 0.0987</code></pre>
<div class="sourceCode" id="cb591"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples_50</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarize</span><span class="op">(</span>sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">prop_red</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop_last'</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       sd
##    &lt;dbl&gt;
## 1 0.0673</code></pre>
<div class="sourceCode" id="cb593"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_samples_100</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarize</span><span class="op">(</span>sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">prop_red</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop_last'</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       sd
##    &lt;dbl&gt;
## 1 0.0453</code></pre>
<div class="sourceCode" id="cb595"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Start by performing group_by(n) to get data separated</span>
<span class="co"># by our different shovel sizes. </span>

<span class="va">comparing_n_table</span> <span class="op">&lt;-</span> <span class="va">virtual_prop</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># Take the standard deviation and mean of prop_red</span>
  <span class="co"># using summarize. </span>
  
  <span class="fu">summarize</span><span class="op">(</span>sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">prop_red</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop_last'</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># Rename using backslashes (with the desired) text</span>
  <span class="co"># on the left and the existing column on the right.</span>
  <span class="co"># This is for clarity once we create our table. </span>
  
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>`Number of slots in shovel` <span class="op">=</span> <span class="va">n</span>, 
         `Standard deviation of proportions red` <span class="op">=</span> <span class="va">sd</span><span class="op">)</span>

<span class="co"># Create a table using gt().</span>

<span class="va">comparing_n_table</span>  <span class="op">%&gt;%</span> 
  <span class="fu">gt</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># Use tab_header to add an appropriate title. </span>
  
  <span class="fu">tab_header</span><span class="op">(</span>
    title <span class="op">=</span> <span class="st">"Comparing standard deviations of proportions red for three different shovels"</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># Use fmt_number() to adjust the number of desired decimals</span>
  <span class="co"># in the resulting table. </span>
  
  <span class="fu">fmt_number</span><span class="op">(</span>
    columns <span class="op">=</span> <span class="st">"Standard deviation of proportions red"</span>,
    decimals <span class="op">=</span> <span class="fl">3</span>
  <span class="op">)</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#thkqavcuev .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#thkqavcuev .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#thkqavcuev .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#thkqavcuev .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#thkqavcuev .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#thkqavcuev .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#thkqavcuev .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#thkqavcuev .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#thkqavcuev .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#thkqavcuev .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#thkqavcuev .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#thkqavcuev .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#thkqavcuev .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#thkqavcuev .gt_from_md > :first-child {
  margin-top: 0;
}

#thkqavcuev .gt_from_md > :last-child {
  margin-bottom: 0;
}

#thkqavcuev .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#thkqavcuev .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#thkqavcuev .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#thkqavcuev .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#thkqavcuev .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#thkqavcuev .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#thkqavcuev .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#thkqavcuev .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#thkqavcuev .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#thkqavcuev .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#thkqavcuev .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#thkqavcuev .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#thkqavcuev .gt_left {
  text-align: left;
}

#thkqavcuev .gt_center {
  text-align: center;
}

#thkqavcuev .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#thkqavcuev .gt_font_normal {
  font-weight: normal;
}

#thkqavcuev .gt_font_bold {
  font-weight: bold;
}

#thkqavcuev .gt_font_italic {
  font-style: italic;
}

#thkqavcuev .gt_super {
  font-size: 65%;
}

#thkqavcuev .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="thkqavcuev" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><div class="inline-table"><table class="gt_table">
<thead class="gt_header">
<tr>
<th colspan="2" class="gt_heading gt_title gt_font_normal" style>Comparing standard deviations of proportions red for three different shovels</th>
    </tr>
<tr>
<th colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
</thead>
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Number of slots in shovel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Standard deviation of proportions red</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_right">25</td>
      <td class="gt_row gt_right">0.099</td>
    </tr>
<tr>
<td class="gt_row gt_right">50</td>
      <td class="gt_row gt_right">0.067</td>
    </tr>
<tr>
<td class="gt_row gt_right">100</td>
      <td class="gt_row gt_right">0.045</td>
    </tr>
</tbody>
</table></div></div>
<p> </p>
<p>As we observed earlier, as the sample size increases, the variation decreases. In other words, there is less variation in the 1,000 values of the proportion red. So as the sample size increases, our guesses at the true proportion of the urn’s beads that are red get more precise. Therefore, the larger the shovel, the more precise the result!</p>
</div>
<div id="functions-are-your-friend" class="section level3" number="6.2.5">
<h3>
<span class="header-section-number">6.2.5</span> Functions are your friend!<a class="anchor" aria-label="anchor" href="#functions-are-your-friend"><i class="fas fa-link"></i></a>
</h3>
<p>Note that in the last section, we ran more or less the same code three times, but with different sizes for our shovel (25, 50, and 100). Whenever you find yourself writing the same code three or more times, you should write a <em>function</em> that does the same thing. Let’s look at the code that used a shovel of size 25 and calculated the proportion of beads that were red one more time:</p>
<div class="sourceCode" id="cb596"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">urn</span>, size <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 x 5
##       ID shovel            numb_red numb_beads prop_red
##    &lt;int&gt; &lt;list&gt;               &lt;int&gt;      &lt;int&gt;    &lt;dbl&gt;
##  1     1 &lt;tibble [25 × 2]&gt;        8         25     0.32
##  2     2 &lt;tibble [25 × 2]&gt;       12         25     0.48
##  3     3 &lt;tibble [25 × 2]&gt;       14         25     0.56
##  4     4 &lt;tibble [25 × 2]&gt;        9         25     0.36
##  5     5 &lt;tibble [25 × 2]&gt;       11         25     0.44
##  6     6 &lt;tibble [25 × 2]&gt;       10         25     0.4 
##  7     7 &lt;tibble [25 × 2]&gt;        9         25     0.36
##  8     8 &lt;tibble [25 × 2]&gt;       10         25     0.4 
##  9     9 &lt;tibble [25 × 2]&gt;        6         25     0.24
## 10    10 &lt;tibble [25 × 2]&gt;        8         25     0.32
## # … with 990 more rows</code></pre>
<p>Once you have a pipe which does what you want, creating a function is relatively easy. Just place the code within a function definition and “pull out” specific variables as arguments.</p>
<div class="sourceCode" id="cb598"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">make_prop_red</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">shovel_size</span>, <span class="va">reps</span><span class="op">)</span><span class="op">{</span>
  <span class="fu">tibble</span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">reps</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>shovel <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ID</span>, <span class="op">~</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">x</span>, size <span class="op">=</span> <span class="va">shovel_size</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_red <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb_beads <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">shovel</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red <span class="op">=</span> <span class="va">numb_red</span> <span class="op">/</span> <span class="va">numb_beads</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>See how this just uses the code we had before to create <code>virtual_prop_red_25</code>, but generalizes it. Now we can create the same tibbles we did before, ready to plot the histograms, with only three lines of code:</p>
<div class="sourceCode" id="cb599"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">virtual_prop_red_25</span>  <span class="op">&lt;-</span> <span class="fu">make_prop_red</span><span class="op">(</span>x <span class="op">=</span> <span class="va">urn</span>, shovel_size <span class="op">=</span> <span class="fl">25</span>,  reps <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span>
<span class="va">virtual_prop_red_50</span>  <span class="op">&lt;-</span> <span class="fu">make_prop_red</span><span class="op">(</span>x <span class="op">=</span> <span class="va">urn</span>, shovel_size <span class="op">=</span> <span class="fl">50</span>,  reps <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span>
<span class="va">virtual_prop_red_100</span> <span class="op">&lt;-</span> <span class="fu">make_prop_red</span><span class="op">(</span>x <span class="op">=</span> <span class="va">urn</span>, shovel_size <span class="op">=</span> <span class="fl">100</span>, reps <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></code></pre></div>
<p>But this still isn’t the best way. Note that we have three objects we need to deal with, <code>virtual_prop_red_25</code>, <code>virtual_prop_red_50</code>, and <code>virtual_prop_red_100</code>. Instead, let’s store our results in a single tibble. How can we do this? By using <code>map()</code> to create a list column!</p>
<p>First, we’ll create a tibble that has a variable named <code>shovel_size</code> with our values (25, 50, 100):</p>
<!-- DK: Not sure I like these argument names. -->
<div class="sourceCode" id="cb600"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>shovel_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 1
##   shovel_size
##         &lt;dbl&gt;
## 1          25
## 2          50
## 3         100</code></pre>
<p>Next, we’ll create list column called <code>prop_red_results</code> that is the output of <code>make_prop_red()</code>.</p>
<div class="sourceCode" id="cb602"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="op">(</span>shovel_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red_results <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">shovel_size</span>,
                                <span class="op">~</span> <span class="fu">make_prop_red</span><span class="op">(</span>x <span class="op">=</span> <span class="va">urn</span>, 
                                           shovel_size <span class="op">=</span> <span class="va">.x</span>, 
                                           reps <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   shovel_size prop_red_results    
##         &lt;dbl&gt; &lt;list&gt;              
## 1          25 &lt;tibble [1,000 × 5]&gt;
## 2          50 &lt;tibble [1,000 × 5]&gt;
## 3         100 &lt;tibble [1,000 × 5]&gt;</code></pre>
<p>Adding another <code>map_*</code> function will let us get the standard deviations of our estimated proportions:</p>
<div class="sourceCode" id="cb604"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shovels</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>shovel_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red_results <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">shovel_size</span>,
                                <span class="op">~</span> <span class="fu">make_prop_red</span><span class="op">(</span>x <span class="op">=</span> <span class="va">urn</span>, 
                                           shovel_size <span class="op">=</span> <span class="va">.x</span>, 
                                           reps <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># Use map_dbl() to create a column that draws the </span>
  <span class="co"># standard deviations of our prop_red values. We </span>
  <span class="co"># can use pull after our ~ to isolate the prop_red</span>
  <span class="co"># values and use a pipe (as we normally do) here</span>
  <span class="co"># to draw the sd() of this column. </span>
  
  
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red_sd <span class="op">=</span> <span class="fu">map_dbl</span><span class="op">(</span><span class="va">prop_red_results</span>, 
                               <span class="op">~</span> <span class="fu">pull</span><span class="op">(</span><span class="va">.</span>, <span class="va">prop_red</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu">glimpse</span><span class="op">(</span><span class="va">shovels</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 3
## Columns: 3
## $ shovel_size      &lt;dbl&gt; 25, 50, 100
## $ prop_red_results &lt;list&gt; [&lt;tbl_df[1000 x 5]&gt;, &lt;tbl_df[1000 x 5]&gt;, &lt;tbl_df[10…
## $ prop_red_sd      &lt;dbl&gt; 0.099, 0.070, 0.046</code></pre>
<p>Now that we have this framework, there’s no need to limit ourselves to the sizes 25, 50, and 100. Why not try all integers from 1 to 100? We can use the same code, except we’ll now set <code>shovel_size = 1:100</code> when initializing the tibble.</p>
<div class="sourceCode" id="cb606"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shovels_100</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>shovel_size <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red_results <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">shovel_size</span>,
                                <span class="op">~</span> <span class="fu">make_prop_red</span><span class="op">(</span>x <span class="op">=</span> <span class="va">urn</span>, 
                                           shovel_size <span class="op">=</span> <span class="va">.x</span>, 
                                           reps <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_red_sd <span class="op">=</span> <span class="fu">map_dbl</span><span class="op">(</span><span class="va">prop_red_results</span>, 
                               <span class="op">~</span> <span class="fu">pull</span><span class="op">(</span><span class="va">.</span>, <span class="va">prop_red</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu">glimpse</span><span class="op">(</span><span class="va">shovels_100</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 100
## Columns: 3
## $ shovel_size      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1…
## $ prop_red_results &lt;list&gt; [&lt;tbl_df[1000 x 5]&gt;, &lt;tbl_df[1000 x 5]&gt;, &lt;tbl_df[10…
## $ prop_red_sd      &lt;dbl&gt; 0.483, 0.337, 0.271, 0.250, 0.214, 0.195, 0.191, 0.1…</code></pre>
<p>Now, we have the standard deviation of <code>prop_red</code> for all shovel sizes from 1 to 100. Let’s plot that value to see how it changes as the shovel gets larger:</p>
<!-- MF: Still researching the below problem. -->
<div class="figure">
<span id="fig:unnamed-chunk-454"></span>
<img src="book_temp_files/figure-html/unnamed-chunk-454-1.png" alt="Comparing standard deviations of proportions red for 100 different shovels. The standard deviation decreases at the same rate as the square root of shovel size. The red line shows the standard error." width="100%"><p class="caption">
FIGURE 6.11: Comparing standard deviations of proportions red for 100 different shovels. The standard deviation decreases at the same rate as the square root of shovel size. The red line shows the standard error.
</p>
</div>
<p>The red line here represents an important statistical concept: standard error (SE). The mathematical definition of SE for our purposes is the standard deviation divided by the square root of the sample size. As the shovel size increases, and thus our sample size increases, we find that the standard error decreases. If this is confusing right now, fear not! We will delve into this explanation in our next section.</p>
<div class="figure">
<span id="fig:unnamed-chunk-455"></span>
<img src="06-one-parameter/images/meme_math.png" alt="To any poets and philosophers confused about this: don't worry! It won't be on a problem set." width="100%"><p class="caption">
FIGURE 6.12: To any poets and philosophers confused about this: don’t worry! It won’t be on a problem set.
</p>
</div>
<p>This is the power of running many analyses at once using <code>map_*</code> functions and list columns: before, we could tell that the standard deviation was decreasing as the shovel size increased, but when only looking at shovel sizes of 25, 50, and 100, it wasn’t clear <em>how quickly</em> it was decreasing.</p>
</div>
</div>
<div id="standard-errors" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Standard error<a class="anchor" aria-label="anchor" href="#standard-errors"><i class="fas fa-link"></i></a>
</h2>
<div class="figure" style="text-align: center">
<span id="fig:unnamed-chunk-456"></span>
<img src="06-one-parameter/images/old_man_SE.png" alt="Standard errors are just the way old people talk about confidence intervals." width="100%"><p class="caption">
FIGURE 6.13: Standard errors are just the way old people talk about confidence intervals.
</p>
</div>
<p>Standard errors quantify the effect of sampling variation induced on our estimates. In other words, they quantify how much we can expect different proportions of a shovel’s beads that are red <em>to vary</em> from one sample to another sample to another sample, and so on. As a general rule, as sample size increases, the standard error decreases.</p>
<p><em>SE refers to the standard deviation of a sample statistic (aka point estimate), such as the mean or median.</em> For example, the “standard error of the mean” refers to the standard deviation of the distribution of sample means taken from a population.</p>
<p>The relationship between the standard error and the standard deviation is such that, for a given sample size, the standard error equals the standard deviation divided by the square root of the sample size. Accordingly, the standard error is inversely proportional to the sample size; the larger the sample size, the smaller the standard error because the statistic will approach the actual value.</p>
<p>If this sounds confusing, don’t worry! It should. Before we can explain this in more depth, it is important to understand some terminology pertaining to standard error.</p>
<!-- DK: The point of this section is to make the concept of a standard error crystal clear. Also, explain that the standard error is just one possible measure of how close we are to the truth. It isn't magic! There are other reasonable measures, like average absolute error. Connect this to MAD SD so that students are no surprised. Title of this section should be -->
<div id="terminology-and-notation" class="section level3" number="6.3.1">
<h3>
<span class="header-section-number">6.3.1</span> Terminology and notation<a class="anchor" aria-label="anchor" href="#terminology-and-notation"><i class="fas fa-link"></i></a>
</h3>
<div class="figure">
<span id="fig:unnamed-chunk-457"></span>
<img src="06-one-parameter/images/yoda.png" alt="Let Yoda's wisdom dull the pain of this terminology section." width="100%"><p class="caption">
FIGURE 6.14: Let Yoda’s wisdom dull the pain of this terminology section.
</p>
</div>
<p>Let’s now introduce some terminology and notation as well as statistical definitions related to sampling. You will likely want to read this section a few times. Keep in mind, however, that all of the concepts underlying these terminology, notation, and definitions tie directly to the concepts underlying our tactile and virtual sampling activities. It will simply take time and practice to master them.</p>
<p>First, a <strong>population</strong> is a collection of individuals or observations we are interested in. This is also commonly denoted as a <strong>study population</strong>. We mathematically denote the population’s size using upper-case <span class="math inline">\(N\)</span>. In our sampling activities, the (study) population is the collection of <span class="math inline">\(N\)</span> = 1000 identically sized red and white beads contained in the urn.</p>
<p>Second, a <strong>population parameter</strong> is a numerical summary quantity about the population that is unknown, but you wish you knew. For example, when this quantity is a mean, the population parameter of interest is the <em>population mean</em>. This is mathematically denoted with the Greek letter <span class="math inline">\(\mu\)</span> pronounced “mu.” In our earlier sampling from the urn activity, however, since we were interested in the <em>proportion</em> of the urn’s beads that were red, the population parameter is the <em>population proportion</em>. This is mathematically denoted with the letter <span class="math inline">\(p\)</span>.</p>
<p>Third, a <strong>census</strong> is an exhaustive enumeration or counting of all <span class="math inline">\(N\)</span> individuals or observations in the population in order to compute the population parameter’s value <em>exactly</em>. In our sampling activity, this would correspond to counting the number of beads out of <span class="math inline">\(N\)</span> = 1000 that are red and computing the <em>population proportion</em> <span class="math inline">\(p\)</span> that are red <em>exactly</em>. When the number <span class="math inline">\(N\)</span> of individuals or observations in our population is large as was the case with our urn, a census can be quite expensive in terms of time, energy, and money.</p>
<p>Fourth, <strong>sampling</strong> is the act of collecting a sample from the population when we don’t have the means to perform a census. We mathematically denote the sample’s size using lower case <span class="math inline">\(n\)</span>, as opposed to upper case <span class="math inline">\(N\)</span> which denotes the population’s size. Typically the sample size <span class="math inline">\(n\)</span> is much smaller than the population size <span class="math inline">\(N\)</span>. Thus sampling is a cheaper alternative to performing a census. In our sampling activities, we used shovels with varying slots to extract samples of size <span class="math inline">\(n\)</span> = 1 through <span class="math inline">\(n\)</span> = 100.</p>
<p>Fifth, a <strong>point estimate (AKA sample statistic)</strong> is a summary statistic computed from a sample that <em>estimates</em> an unknown population parameter. In our sampling activities, recall that the unknown population parameter was the population proportion and that this is mathematically denoted with <span class="math inline">\(p\)</span>. Our point estimate is the <em>sample proportion</em>: the proportion of the shovel’s beads that are red. In other words, it is our guess of the proportion of the urn’s beads that are red. We mathematically denote the sample proportion using <span class="math inline">\(\hat{p}\)</span>. The “hat” on top of the <span class="math inline">\(p\)</span> indicates that it is an estimate of the unknown population proportion <span class="math inline">\(p\)</span>.</p>
<p>Sixth is the idea of <strong>representative sampling</strong>. A sample is said to be a <em>representative sample</em> if it roughly <em>looks like</em> the population. In other words, are the sample’s characteristics a good representation of the population’s characteristics? In our sampling activity, are the samples of <span class="math inline">\(n\)</span> beads extracted using our shovels representative of the urn’s <span class="math inline">\(N\)</span> = 1000 beads?</p>
<p>Seventh is the idea of <strong>generalizability</strong>. We say a sample is generalizable if any results based on the sample can generalize to the population. In our sampling activity, can we generalize the sample proportion from our shovels to the entire urn? Using our mathematical notation, this is akin to asking if <span class="math inline">\(\hat{p}\)</span> is a “good guess” of <span class="math inline">\(p\)</span>?</p>
<p>Eighth, we say <strong>biased sampling</strong> occurs if certain individuals or observations in a population have a higher chance of being included in a sample than others. We say a sampling procedure is <em>unbiased</em> if every observation in a population had an equal chance of being sampled. Had the red beads been much smaller than the white beads, and therefore more prone to falling through the shovel, our sample would have been <em>biased</em>. In our sampling activities, since we mixed all <span class="math inline">\(N = 1000\)</span> beads prior to each group’s sampling and since each of the equally sized beads had an equal chance of being sampled, our samples were <em>unbiased</em>.</p>
<p>Ninth and lastly, the idea of <strong>random sampling</strong>. We say a sampling procedure is <em>random</em> if we sample randomly from the population in an unbiased fashion. In our sampling activities, this would correspond to sufficiently mixing the urn before each use of the shovel.</p>
<div class="figure" style="text-align: center">
<span id="fig:unnamed-chunk-458"></span>
<img src="06-one-parameter/images/cant_breathe_sponge.png" alt="Fear not if you look like Spongebob after reading this section. We will re-cap right now!" width="100%"><p class="caption">
FIGURE 6.15: Fear not if you look like Spongebob after reading this section. We will re-cap right now!
</p>
</div>
<p>Phew, that’s a lot of new terminology and notation to learn! Let’s put them all together to describe the paradigm of sampling.</p>
<p><strong>In general:</strong></p>
<ul>
<li>If the sampling of a sample of size <span class="math inline">\(n\)</span> is done at <strong>random</strong>, then</li>
<li>the sample is <strong>unbiased</strong> and <strong>representative</strong> of the population of size <span class="math inline">\(N\)</span>, thus</li>
<li>any result based on the sample can <strong>generalize</strong> to the population, thus</li>
<li>the point estimate is a <strong>“good guess”</strong> of the unknown population parameter, thus</li>
<li>instead of performing a <strong>census</strong>, we can draw inferences about the population using <strong>sampling</strong>.</li>
</ul>
<p><strong>Specific to our sampling activity:</strong></p>
<ul>
<li>If we extract a sample of <span class="math inline">\(n=50\)</span> beads at <strong>random</strong>, in other words, we mix all of the equally sized beads before using the shovel, then</li>
<li>the contents of the shovel are an <strong>unbiased representation</strong> of the contents of the urn’s 1000 beads, thus</li>
<li>any result based on the shovel’s beads can <strong>generalize</strong> to the urn, thus</li>
<li>the sample proportion <span class="math inline">\(\hat{p}\)</span> of the <span class="math inline">\(n=50\)</span> beads in the shovel that are red is a <strong>“good guess”</strong> of the population proportion <span class="math inline">\(p\)</span> of the <span class="math inline">\(N=1000\)</span> beads that are red, thus</li>
<li>instead of manually going over all 1000 beads in the urn, we can <strong>infer</strong> about the urn using the shovel.</li>
</ul>
<p>Note that last word we wrote in bold: <strong>infer</strong>. The act of “inferring” means to deduce or conclude information from evidence and reasoning. In our sampling activities, we wanted to infer about the proportion of the urn’s beads that are red. <a href="https://en.wikipedia.org/wiki/Statistical_inference"><em>Statistical inference</em></a> is the “theory, methods, and practice of forming judgments about the parameters of a population and the reliability of statistical relationships, typically on the basis of random sampling.” In other words, statistical inference is the act of inference via sampling.</p>
</div>
<div id="sampling-definitions" class="section level3" number="6.3.2">
<h3>
<span class="header-section-number">6.3.2</span> Statistical definitions<a class="anchor" aria-label="anchor" href="#sampling-definitions"><i class="fas fa-link"></i></a>
</h3>
<div class="figure">
<span id="fig:unnamed-chunk-459"></span>
<img src="06-one-parameter/images/really_more.png" alt="We are almost done! Hang in there." width="100%"><p class="caption">
FIGURE 6.16: We are almost done! Hang in there.
</p>
</div>
<p>Now, for some important statistical definitions related to sampling. As a refresher of our 1,000 repeated/replicated virtual samples of size <span class="math inline">\(n\)</span> = 25, <span class="math inline">\(n\)</span> = 50, and <span class="math inline">\(n\)</span> = 100 in Section <a href="one-parameter.html#virtual-sampling">6.2</a>, let’s display our figure showing the difference in proportions red according to different shovel sizes.</p>
<div class="figure">
<span id="fig:unnamed-chunk-460"></span>
<img src="book_temp_files/figure-html/unnamed-chunk-460-1.png" alt="Previously seen three distributions of the sample proportion $\hat{p}$." width="100%"><p class="caption">
FIGURE 6.17: Previously seen three distributions of the sample proportion <span class="math inline">\(\hat{p}\)</span>.
</p>
</div>
<p>These types of distributions have a special name: <strong>sampling distributions</strong>; their visualization displays the effect of sampling variation on the distribution of a point estimate; in this case, the sample proportion <span class="math inline">\(\hat{p}\)</span>. Using these sampling distributions, for a given sample size <span class="math inline">\(n\)</span>, we can make statements about what values we typically expect.</p>
<p>For example, observe the centers of all three sampling distributions: they are all roughly centered around <span class="math inline">\(0.4 = 40\%\)</span>. Furthermore, observe that while we are somewhat likely to observe sample proportions of red beads of <span class="math inline">\(0.2 = 20\%\)</span> when using the shovel with 25 slots, we will almost never observe a proportion of 20% when using the shovel with 100 slots. Observe also the effect of sample size on the sampling variation. As the sample size <span class="math inline">\(n\)</span> increases from 25 to 50 to 100, the variation of the sampling distribution decreases and thus the values cluster more and more tightly around the same center of around 40%. We quantified this variation using the standard deviation of our sample proportions, seeing that the standard deviation decreases with the square root of the sample size:</p>
<div class="figure">
<span id="fig:unnamed-chunk-461"></span>
<img src="book_temp_files/figure-html/unnamed-chunk-461-1.png" alt="Previously seen comparing standard deviations of proportions red for 100 different shovels" width="100%"><p class="caption">
FIGURE 6.18: Previously seen comparing standard deviations of proportions red for 100 different shovels
</p>
</div>
<p>So as the sample size increases, the standard deviation of the proportion of red beads decreases. This type of standard deviation has another special name: <strong>standard error</strong></p>
</div>
<div id="what-is-a-standard-error" class="section level3" number="6.3.3">
<h3>
<span class="header-section-number">6.3.3</span> What is a “standard error?”<a class="anchor" aria-label="anchor" href="#what-is-a-standard-error"><i class="fas fa-link"></i></a>
</h3>
<p>The “standard error” (SE) is a term that measures the accuracy with which a sample distribution represents a population through the use of standard deviation. Specifically, SE is used to refer to the standard deviation of a sample statistic (aka point estimate), such as the mean or median. For example, the “standard error of the mean” refers to the standard deviation of the distribution of sample means taken from a population.</p>
<blockquote>
<p>In statistics, a sample mean deviates from the actual mean of a population; this deviation is the standard error of the mean.</p>
</blockquote>
<p>Many students struggle to differentiate the standard error from the standard deviation. The relationship between the standard error and the standard deviation is such that, for a given sample size, the standard error equals the standard deviation divided by the square root of the sample size. Accordingly, the standard error is inversely proportional to the sample size; the larger the sample size, the smaller the standard error because the statistic will approach the actual value.</p>
<!-- Insert visual aid for students who are not mathematically inclined showing that larger sample sizes = closer to actual value -->
<p>The more data points involved in the calculations of the mean, the smaller the standard error tends to be. When the standard error is small, the data is said to be more representative of the true mean. In cases where the standard error is large, the data may have some notable irregularities. Thus, larger sample size = smaller standard error = more representative of the truth.</p>
<p>To help reinforce these concepts, let’s re-display our previous figure but using our new sampling terminology, notation, and definitions:</p>
<div class="figure">
<span id="fig:unnamed-chunk-462"></span>
<img src="book_temp_files/figure-html/unnamed-chunk-462-1.png" alt="Three sampling distributions of the sample proportion $\hat{p}$. Note the increased concentration on the bins around .4 as our sample size increases." width="100%"><p class="caption">
FIGURE 6.19: Three sampling distributions of the sample proportion <span class="math inline">\(\hat{p}\)</span>. Note the increased concentration on the bins around .4 as our sample size increases.
</p>
</div>
<p>Furthermore, let’s display the graph of standard errors for <span class="math inline">\(n = 1\)</span> to <span class="math inline">\(n = 100\)</span> using our new terminology, notation, and definitions relating to sampling.</p>
<div class="figure">
<span id="fig:unnamed-chunk-463"></span>
<img src="book_temp_files/figure-html/unnamed-chunk-463-1.png" alt="Standard errors of the sample proportion based on sample sizes of 1 to 100" width="100%"><p class="caption">
FIGURE 6.20: Standard errors of the sample proportion based on sample sizes of 1 to 100
</p>
</div>
<p>Remember the key message of this last table: that as the sample size <span class="math inline">\(n\)</span> goes up, the “typical” error of your point estimate will go down, as quantified by the <em>standard error</em>.</p>
</div>
<div id="moral-of-the-story" class="section level3" number="6.3.4">
<h3>
<span class="header-section-number">6.3.4</span> The moral of the story<a class="anchor" aria-label="anchor" href="#moral-of-the-story"><i class="fas fa-link"></i></a>
</h3>
<p>If we could only know two pieces of information from our data, what would they be? First, you need a measure of the <strong>center</strong> of the distribution. This would include the mean or median, which shows the center of our data points. Second, we need a measure of the <strong>variability</strong> of the distribution. To understand our center, we must understand how different (or how spread) our data points are from one another. Thus, we need a measure like sd() or MAD. These are summary statistics which are necessary to understanding a distribution. Do those two figures encompass all you need to know about a distribution? No! But, if you are only allowed two numbers to keep, those are the most valuable.</p>
<blockquote>
<p>The mean or median is a good estimate for the center of the posterior and the standard error or mad is a good estimate for the variability of the posterior, with +/- 2 standard errors covering 95% of the outcomes.</p>
</blockquote>
<p>The standard error measures the accuracy of a sample distribution as compared to the population by using the standard deviation. Specifically, the standard deviation of our data points divided by the square root of the sample size. As such, we find that larger sample sizes = lower standard errors = more accurate and representative guesses.</p>
<p>To really drive home our point: standard error is just a fancy term for your uncertainty about something you don’t know. Standard error == our (uncertain) beliefs.</p>
<div class="figure" style="text-align: center">
<span id="fig:unnamed-chunk-464"></span>
<img src="06-one-parameter/images/new_maslow.png" alt="If you are wondering how much you need to know, follow this helpful guide of the information we have learned this chapter!" width="100%"><p class="caption">
FIGURE 6.21: If you are wondering how much you need to know, follow this helpful guide of the information we have learned this chapter!
</p>
</div>
<p>This hierarchy represents the knowledge we need to understand standard error (SE). At the bottom, we have math. It’s the foundation for our understanding, but it doesn’t need to be what we take away from this lesson. As we go up, we simplify the topic. The top of the pyramid are the basic levels of understanding that will help you to remember in the future.</p>
<p>If I know your estimate plus or minus <em>two</em> standard errors, I know your 95% confidence interval. This is valuable information. Standard error is really just a measure for how uncertain we are about something we do not know, the thing we are estimating. When we recall SE, we should remember that, all in all, it’s a complicated concept that can be distilled into: the way old people talk about confidence intervals.</p>
<p>Recall that <span class="math inline">\(\hat{p}\)</span> is the estimated value of p which comes from taking a sample. There can be billions and billions of <span class="math inline">\(\hat{p}\)</span>’s. We look at a large group of <span class="math inline">\(\hat{p}\)</span>’s, create a distribution of results to represent the possible values of p based on our findings, and then we compute a standard error to account for our own uncertainty about our predictions. Our 95% confidence interval for our prediction == our estimate plus or minus <strong>two</strong> standard errors.</p>
<!-- DK: Does the student have the main lessons? Standard error is a measure of how close you expect your guess to be to the truth. There are many other measures like mean absolute deviation and MAD SD (where this is the median absolute deviation). I am confused about this! -->
</div>
</div>
<div id="answering-the-questions" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Answering the questions<a class="anchor" aria-label="anchor" href="#answering-the-questions"><i class="fas fa-link"></i></a>
</h2>
<p>Recall the questions we asked at the beginning of our chapter:</p>
<p><em>If we get 17 red beads in a random sample of size 50 taken from an urn, what proportion <span class="math inline">\(p\)</span> of the beads in the urn are red?</em></p>
<p><em>What is the probability, using the same urn, that we will draw more than 8 red beads if we use a shovel of size 20?</em></p>
<p>We have looked at a number of different models and their accuracy and precision. To delve into our primary questions, we must return to our discussion of distributions: posterior, joint, and marginal.</p>
<div id="joint-distribution" class="section level3" number="6.4.1">
<h3>
<span class="header-section-number">6.4.1</span> Joint distribution<a class="anchor" aria-label="anchor" href="#joint-distribution"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s start with our first question: <strong>If we get 17 red beads in a random sample of size 50 taken from an urn with 1000 (white or red) beads, how many red beads are in the urn?</strong></p>
<p>In Chapter <a href="probability.html#probability">5</a> we outlined the key intuition behind all inference: there is a joint distribution of data-which-we-might-see-from-our-experiment and models-which-we-are-considering. We take this joint distribution, combine it with the actual results of the experiment, and calculate a posterior distribution over the set of possible models. In other words, we start with</p>
<p><span class="math display">\[\text{Prob}(\text{models}, \text{data})\]</span></p>
<p>We then add the specific results of the experiment, and calculate the conditional distribution of the models, given the data that we have seen:</p>
<p><span class="math display">\[\text{Prob}(\text{models} | \text{data} = \text{results of experiment})\]</span></p>
<p>The rest is just details.</p>
<p>We can do the same thing with our sampling problem. Assume that we know that there are 1,000 beads in the urn, and that all of them are either red or white. Our experiment involves the one-time use of a paddle with 50 slots. We have 1,001 models under consideration. There might be zero red beads or one red bead or … 999 red beads or 1000 red beads. With a paddle of size 50, there are 51 possible results from our experiment: zero red beads or one red bead or . . . or 49 red beads or 50 red beads. With this information we can calculate <em>the joint distribution of models which we are considering and the experiment results we might observe.</em> Once we have that joint distribution, we can calculate the conditional distribution of the total number of red beads, given however many we observed in our sample.</p>
<p>It is useful to define a parameter, <span class="math inline">\(p\)</span>, which is the proportion of red beads in the urn. This also takes on exactly 1,001 possible values: <span class="math inline">\(0, 1/1000, 2/1000, ..., 999/1000, 1\)</span>. With these assumptions, we can create an unnormalized joint distribution:</p>
<!-- Note to future authors: I am somewhat concerned that this is not exactly correct since we really ought to sample what happens when you pick 50 beads out of an urn. This can be approximated with the binomial, which is what we have done here. And, with such big numbers, it is a good approximation. But it is not exactly correct. -->
<div class="sourceCode" id="cb608"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>

<span class="co"># Set values for the urn, paddle, and reps</span>
<span class="co"># as this helps with creating our joint</span>
<span class="co"># distribution later. </span>

<span class="va">urn_size</span> <span class="op">&lt;-</span> <span class="fl">1000</span>
<span class="va">paddle_size</span> <span class="op">&lt;-</span> <span class="fl">50</span>
<span class="va">reps</span> <span class="op">&lt;-</span> <span class="fl">100</span>

<span class="co"># Create a tibble where red_in_urn creates </span>
<span class="co"># a sequence from 0 to urn_size(1000) by</span>
<span class="co"># a value of 1. Create p as red_in_urn</span>
<span class="co"># divided by the total urn_size. Column</span>
<span class="co"># red_in_paddle will map p using rbinom().</span>
<span class="co"># Call n = reps (where reps is defined</span>
<span class="co"># as 100) and size as paddle_size (defined</span>
<span class="co"># as 50). Finally, unnest!</span>

<span class="va">joint_dist</span> <span class="op">&lt;-</span> 
  <span class="fu">tibble</span><span class="op">(</span>red_in_urn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="va">urn_size</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>p <span class="op">=</span> <span class="va">red_in_urn</span> <span class="op">/</span> <span class="va">urn_size</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>red_in_paddle <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">p</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">reps</span>, 
                                               size <span class="op">=</span> <span class="va">paddle_size</span>, 
                                               prob <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">unnest</span><span class="op">(</span><span class="va">red_in_paddle</span><span class="op">)</span> 

<span class="co"># After making our joint distribution, take a </span>
<span class="co"># sample of size 10. </span>

<span class="va">joint_dist</span> <span class="op">%&gt;%</span> 
  <span class="fu">sample_n</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    red_in_urn     p red_in_paddle
##         &lt;dbl&gt; &lt;dbl&gt;         &lt;int&gt;
##  1        974 0.974            46
##  2        957 0.957            47
##  3        199 0.199            11
##  4        860 0.86             46
##  5         36 0.036             3
##  6        221 0.221            13
##  7        862 0.862            44
##  8        117 0.117             3
##  9        664 0.664            30
## 10        944 0.944            49</code></pre>
<p>After looking at our joint distribution, let’s plot it. Call the <code>red_in_urn</code> for our y-axis, to indicate the number of red beads in the urn. Call <code>red_in_paddle</code> for our x-axis, to indicate the number of red beads in each paddle. This allows us to see which possible values of red beads in our samples correspond with <span class="math inline">\(p\)</span>, the proportion of red beads in the urn.</p>
<div class="sourceCode" id="cb610"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">joint_dist</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">red_in_urn</span>, x <span class="op">=</span> <span class="va">red_in_paddle</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Joint Distribution of Red Beads in Paddle and in Urn"</span>,
         x <span class="op">=</span> <span class="st">"Number of Red Beads in Paddle"</span>,
         y <span class="op">=</span> <span class="st">"Number of Red Beads in Urn"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-466-1.png" width="100%"></div>
<p>It is easier to define our “model” in this joint distribution in terms of the unknown parameter <span class="math inline">\(p\)</span> rather than, as above, in terms of the unknown number of red beads in the urn.</p>
<div class="sourceCode" id="cb611"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">joint_dist</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">p</span>, x <span class="op">=</span> <span class="va">red_in_paddle</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Joint Distribution of Red Beads in Paddle and Proportion Red Beads in Urn"</span>,
         x <span class="op">=</span> <span class="st">"Number of Red Beads in Paddle"</span>,
         y <span class="op">=</span> <span class="st">"Proportion of Red Beads in Urn"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-467-1.png" width="100%"></div>
<p>To better visualize this distribution, take a look at the 3D version of this plot. Note the U shape of the graph. By this, we mean to note the peaks at the areas where the number of red beads in the paddle is 0 out of 50 and 50 out of 50. This is due to the fact that, when we draw 0 red beads in a sample of 50 beads, the possibilities for the number of red beads in the urn is consistently close to 0. Similarly, when our sample of 50 beads comes out with 50 red beads, the possibilities for the number of red beads in the urn is consistently closer to 1000.</p>
<div class="figure">
<span id="fig:unnamed-chunk-468"></span>
<img src="06-one-parameter/images/rayshader_full.png" alt="A 3D image of our joint distribution created with Rayshader." width="100%"><p class="caption">
FIGURE 6.22: A 3D image of our joint distribution created with Rayshader.
</p>
</div>
<p>Now, we have explored the most likely possibilities according to all possible models of this scenario. Let’s pivot to a posterior distribution, which will take a <em>slice</em> of our joint distribution that is more specific to our question.</p>
</div>
<div id="posterior-distribution" class="section level3" number="6.4.2">
<h3>
<span class="header-section-number">6.4.2</span> Posterior distribution<a class="anchor" aria-label="anchor" href="#posterior-distribution"><i class="fas fa-link"></i></a>
</h3>
<p>When we look at our question – we are asking for the posterior probability of a certain case. This case is where we find that, using the 50 slot shovel, we get a result of 17 red beads. What does that make our posterior probability? We want:</p>
<p><span class="math display">\[\text{Prob}(\text{models} | \text{data} = 17)\]</span></p>
<p>The same approach works again. We take a “slice” of the joint distribution where the number of red beads in the paddle is equal to 17. After normalization, that gives us the posterior probability for <span class="math inline">\(p\)</span>, or for the number of red beads in the urn. Recall that there is a one-to-one mapping between <span class="math inline">\(p\)</span> and the number of red beads.</p>
<div class="sourceCode" id="cb612"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">joint_dist</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># Filtering for where the red_in_paddle</span>
  <span class="co"># equals 17 allows us to isolate the </span>
  <span class="co"># data that pertains to our question.</span>
  
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">red_in_paddle</span> <span class="op">==</span> <span class="fl">17</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">p</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_histogram</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="fu">after_stat</span><span class="op">(</span><span class="va">count</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                   bins <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Posterior Probability Distribution"</span>,
         subtitle <span class="op">=</span> <span class="st">"Proportion of red beads in urn is centered around 0.34"</span>,
         x <span class="op">=</span> <span class="st">"Proportion p of Red Beads in Urn"</span>,
         y <span class="op">=</span> <span class="st">"Probability"</span><span class="op">)</span> <span class="op">+</span> 
  
  <span class="co"># Here, the labels call allows us to format</span>
  <span class="co"># our axises by whether we would like them to</span>
  <span class="co"># display as numbers or percentages. </span>
  
    <span class="fu">scale_x_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_number.html">number_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_y_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-469-1.png" width="100%"></div>
<p>To visualize this in a 3D plot, see the slice in the figure below. There are a few things to note. First, the x-axis only extends to 600 (rather than the total 1000) due to the fact that, when the paddle only draws 17/50 = .34 = 34% red beads, it is almost impossible for the total number red beads in the total urn to exceed 600. The most likely number of red beads in the total urn, when the paddle draws 17/50 red beads, is somewhere in the 290-350 range. This is signified by the peak between these points. The probability is lower below 280 and above 350 because it is less likely that this is the number of red beads in the urn, conditional on the fact that the paddle drew 17/50 red beads. This is our posterior distribution.</p>
<p>For any value of red beads found in the paddle (from 0 to 50), there is a posterior distribution of possible values of red beads in the total urn. This distribution is meant to illustrate that, though our sample gives an estimate of the total proportion of red beads in the entire urn, there is much variation in what the actual proportion might be.</p>
<p>Recall the first question from the start of the Chapter:</p>
<p><em>If we get 17 red beads in a random sample of size 50 taken from an urn, what proportion <span class="math inline">\(p\)</span> of the beads in the urn are red?</em></p>
<p>The answer is not a single number. Our posterior distribution is just that: a distribution. From our sample, we have many different results for the proportion of red beads in the entire urn. Certain proportions, like the extremes close to 0% or 100%, are essentially impossible due to our sample value being 32%. Some sample proportions, like 40%, occur far more frequently than other sample proportions.</p>
<p>This means that, while we can provide a range of possibilities (and we can estimate which of those possibilities occur most frequently), we can never say that we know the total number of red beads with certainty.</p>
<p>The key issue with the urn paradigm is that, unlike real world data science, we <em>can</em> technically find the true proportion. We just have to perform that exhaustive count that we’ve been so desperately avoiding. In the real world, the “true” solution can never be known. This is why we require inference, and why tools like sampling are so helpful for making assumptions about the world around us.</p>
<div class="figure">
<span id="fig:unnamed-chunk-470"></span>
<img src="06-one-parameter/images/slice_rayshader.png" alt="A 3D image of our joint distribution created with Rayshader." width="100%"><p class="caption">
FIGURE 6.23: A 3D image of our joint distribution created with Rayshader.
</p>
</div>
</div>
<div id="using-the-posterior" class="section level3" number="6.4.3">
<h3>
<span class="header-section-number">6.4.3</span> Using the posterior<a class="anchor" aria-label="anchor" href="#using-the-posterior"><i class="fas fa-link"></i></a>
</h3>
<p>Now that we have our posterior distribution for the proportion <span class="math inline">\(p\)</span> of red beads in the urn, we can use that object to forecast other outcomes, outcomes which we have not yet observed. Recall, from the start of the Chapter:</p>
<p><em>Conditional on our answer to Question 1, what is the probability, using the same urn, that we will draw more than 8 red beads if we use a shovel of size 20?</em></p>
<p>We need to create an (unnormalized) posterior distribution for the number of red beads in a new draw with a 20-slot paddle.</p>
<div class="sourceCode" id="cb613"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">17</span><span class="op">)</span>

<span class="va">paddle_size</span> <span class="op">&lt;-</span> <span class="fl">20</span>


<span class="va">post_dist</span> <span class="op">&lt;-</span> <span class="va">joint_dist</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">red_in_paddle</span> <span class="op">==</span> <span class="fl">17</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">red_in_urn</span>, <span class="op">-</span><span class="va">red_in_paddle</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>new_reds <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">p</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>,
                                        size <span class="op">=</span> <span class="va">paddle_size</span>,
                                        prob <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  
<span class="va">post_dist</span> <span class="op">%&gt;%</span> 
  <span class="fu">sample_n</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##        p new_reds
##    &lt;dbl&gt;    &lt;int&gt;
##  1 0.4          7
##  2 0.345       12
##  3 0.371        7
##  4 0.407        7
##  5 0.354        9
##  6 0.32         7
##  7 0.364        8
##  8 0.307        7
##  9 0.385        8
## 10 0.309        6</code></pre>
<p>With this unnormalized distribution, it is easy to create the normalized posterior probability distribution.</p>
<div class="sourceCode" id="cb615"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">post_dist</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">new_reds</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_histogram</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="fu">after_stat</span><span class="op">(</span><span class="va">count</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                   bins <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Posterior Probability Distribution"</span>,
         subtitle <span class="op">=</span> <span class="st">"Number of red beads in new draw of 20"</span>,
         x <span class="op">=</span> <span class="st">"Number of Red Beads"</span>,
         y <span class="op">=</span> <span class="st">"Probability"</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">scale_x_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_number.html">number_format</a></span><span class="op">(</span>accuracy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_y_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span><span class="op">(</span>accuracy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-472-1.png" width="100%"></div>
<p>To calculate the exact probability of drawing more than 8 reds, we can work directly with the unnormalized distribution.</p>
<div class="sourceCode" id="cb616"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">post_dist</span><span class="op">$</span><span class="va">new_reds</span> <span class="op">&gt;</span> <span class="fl">8</span><span class="op">)</span> <span class="op">/</span>  <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">post_dist</span><span class="op">$</span><span class="va">new_reds</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 0.26</code></pre>
<p>The answer is about 26%.</p>
</div>
</div>
<div id="discussion" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Discussion<a class="anchor" aria-label="anchor" href="#discussion"><i class="fas fa-link"></i></a>
</h2>
<div id="stan_glm" class="section level3" number="6.5.1">
<h3>
<span class="header-section-number">6.5.1</span> stan_glm()<a class="anchor" aria-label="anchor" href="#stan_glm"><i class="fas fa-link"></i></a>
</h3>
<!-- Change "centered at" to reference p. Use rho instead of p -->
<p>Instead of building the joint and conditional probability distributions “by hand” as above, we can just use <code><a href="https://mc-stan.org/rstanarm/reference/stan_glm.html">stan_glm()</a></code> from the <strong>rstanarm</strong> package. For now, we will just walk through the code for doing this very quickly. Chapter <a href="two-parameters.html#two-parameters">7</a> will provide a step-by-step explanation. <strong>To be clear, you do not need to fully understand this section or how this code works. This is an introduction, not a formal lesson.</strong></p>
<p>Assume that, as before, a shovel of size 50 drawn from the urn has returned 17 red beads and 33 white.</p>
<div class="sourceCode" id="cb618"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://mc-stan.org/rstanarm/">rstanarm</a></span><span class="op">)</span>

<span class="va">fit_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mc-stan.org/rstanarm/reference/stan_glm.html">stan_glm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">red</span> <span class="op">~</span> <span class="fl">1</span>, 
                  data <span class="op">=</span> <span class="fu">tibble</span><span class="op">(</span>red <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">17</span><span class="op">)</span>, 
                                        <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">33</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                  family <span class="op">=</span> <span class="va">binomial</span>,
                  refresh <span class="op">=</span> <span class="fl">0</span>,
                  seed <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></code></pre></div>
<p>This single function call has done all the work which we did on our own previously: created the joint distribution and then estimated the posterior probability distribution, conditional on the data which was passed in to the <code>data</code> argument. Once we have the <code>fit_1</code> object, it is just a few lines of code to create the posterior probability distribution for the number of red beads drawn with a shovel of size 20.</p>
<div class="sourceCode" id="cb619"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://mc-stan.org/rstanarm/reference/posterior_predict.stanreg.html">posterior_predict</a></span><span class="op">(</span><span class="va">fit_1</span>, 
                  newdata <span class="op">=</span> <span class="fu">tibble</span><span class="op">(</span>constant <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="va">`1`</span><span class="op">:</span><span class="va">`20`</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_histogram</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="fu">after_stat</span><span class="op">(</span><span class="va">count</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                   bins <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Posterior Probability Distribution"</span>,
         subtitle <span class="op">=</span> <span class="st">"Number of red beads in 20-place shovel"</span>,
         x <span class="op">=</span> <span class="st">"Number of Red Beads"</span>,
         y <span class="op">=</span> <span class="st">"Probability"</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">scale_x_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_number.html">number_format</a></span><span class="op">(</span>accuracy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_y_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span><span class="op">(</span>accuracy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-475-1.png" width="100%"></div>
<p>This posterior is similar to the one we created, much more laboriously, above.</p>
<!-- DK: But they are still different! Why is that? -->
</div>
<div id="hypothesis-tests" class="section level3" number="6.5.2">
<h3>
<span class="header-section-number">6.5.2</span> Hypothesis tests<a class="anchor" aria-label="anchor" href="#hypothesis-tests"><i class="fas fa-link"></i></a>
</h3>
<p>Recall our view on hypothesis tests: <strong>Amateurs test. Professionals summarize.</strong></p>
<p>Let’s look at a possible hypothesis in our urn paradigm: there are equal number of red and white beads in the urn. Can we reject that hypothesis? Convention: if the 95% confidence interval excludes the null hypothesis, then we reject it. Otherwise, we don’t reject it. However, this does not mean that we accept it.</p>
<p>More to the point: who cares! Rejecting or not rejecting hypotheses never helps us to answer real questions. A Yes/No question throws away too much information to (almost) ever be useful. There is no reason to test when you can summarize by providing the full posterior probability distribution.</p>
</div>
<div id="sampling-case-study" class="section level3" number="6.5.3">
<h3>
<span class="header-section-number">6.5.3</span> Case study: Polls<a class="anchor" aria-label="anchor" href="#sampling-case-study"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s now switch gears to a more realistic sampling scenario: a poll. In practice, pollsters do not take 1,000 repeated samples as we did in our previous sampling activities, but rather take only a <em>single sample</em> that’s as large as possible.</p>
<p>On December 4, 2013, National Public Radio in the US reported on a poll of President Obama’s approval rating among young Americans aged 18-29 in an article, <a href="https://www.npr.org/sections/itsallpolitics/2013/12/04/248793753/poll-support-for-obama-among-young-americans-eroding">“Poll: Support For Obama Among Young Americans Eroding.”</a> The poll was conducted by the Kennedy School’s Institute of Politics at Harvard University. A quote from the article:</p>
<blockquote>
<p>After voting for him in large numbers in 2008 and 2012, young Americans are souring on President Obama.</p>
<p>According to a new Harvard University Institute of Politics poll, just 41 percent of millennials — adults ages 18-29 — approve of Obama’s job performance, his lowest-ever standing among the group and an 11-point drop from April.</p>
</blockquote>
<p>Let’s tie elements of the real life poll in this new article with our “tactile” and “virtual” urn activity from Sections <a href="one-parameter.html#sampling-activity">6.1</a> and <a href="one-parameter.html#virtual-sampling">6.2</a> using the terminology, notations, and definitions we learned in Section <a href="one-parameter.html#standard-errors">6.3</a>. You’ll see that our sampling activity with the urn is an idealized version of what pollsters are trying to do in real life.</p>
<p>First, who is the <strong>(Study) Population</strong> of <span class="math inline">\(N\)</span> individuals or observations of interest?</p>
<ul>
<li>Urn: <span class="math inline">\(N\)</span> = 1000 identically sized red and white beads</li>
<li>Obama poll: <span class="math inline">\(N\)</span> = ? young Americans aged 18-29</li>
</ul>
<p>Second, what is the <strong>population parameter</strong>?</p>
<ul>
<li>Urn: The population proportion <span class="math inline">\(p\)</span> of <em>all</em> the beads in the urn that are red.</li>
<li>Obama poll: The population proportion <span class="math inline">\(p\)</span> of <em>all</em> young Americans who approve of Obama’s job performance.</li>
</ul>
<p>Third, what would a <strong>census</strong> look like?</p>
<ul>
<li>Urn: Manually going over all <span class="math inline">\(N\)</span> = 1000 beads and exactly computing the population proportion <span class="math inline">\(p\)</span> of the beads that are red.</li>
<li>Obama poll: Locating all <span class="math inline">\(N\)</span> young Americans and asking them all if they approve of Obama’s job performance. In this case, we don’t even know what the population size <span class="math inline">\(N\)</span> is!</li>
</ul>
<p>Fourth, how do you perform <strong>sampling</strong> to obtain a sample of size <span class="math inline">\(n\)</span>?</p>
<ul>
<li>Urn: Using a shovel with <span class="math inline">\(n\)</span> slots.</li>
<li>Obama poll: One method is to get a list of phone numbers of all young Americans and pick out <span class="math inline">\(n\)</span> phone numbers. In this poll’s case, the sample size of this poll was <span class="math inline">\(n = 2089\)</span> young Americans.</li>
</ul>
<p>Fifth, what is your <strong>point estimate (AKA sample statistic)</strong> of the unknown population parameter?</p>
<ul>
<li>Urn: The sample proportion <span class="math inline">\(\hat{p}\)</span> of the beads in the shovel that were red.</li>
<li>Obama poll: The sample proportion <span class="math inline">\(\hat{p}\)</span> of young Americans in the sample that approve of Obama’s job performance. In this poll’s case, <span class="math inline">\(\hat{p} = 0.41 = 41\%\)</span>, the quoted percentage in the second paragraph of the article.</li>
</ul>
<p>Sixth, is the sampling procedure <strong>representative</strong>?</p>
<ul>
<li>Urn: Are the contents of the shovel representative of the contents of the urn? Because we mixed the urn before sampling, we can feel confident that they are.</li>
<li>Obama poll: Is the sample of <span class="math inline">\(n = 2089\)</span> young Americans representative of <em>all</em> young Americans aged 18-29? This depends on whether the sampling was random.</li>
</ul>
<p>Seventh, are the samples <strong>generalizable</strong> to the greater population?</p>
<ul>
<li>Urn: Is the sample proportion <span class="math inline">\(\hat{p}\)</span> of the shovel’s beads that are red a “good guess” of the population proportion <span class="math inline">\(p\)</span> of the urn’s beads that are red? Given that the sample was representative, the answer is yes.</li>
<li>Obama poll: Is the sample proportion <span class="math inline">\(\hat{p} = 0.41\)</span> of the sample of young Americans who supported Obama a “good guess” of the population proportion <span class="math inline">\(p\)</span> of all young Americans who supported Obama at this time in 2013? In other words, can we confidently say that roughly 41% of <em>all</em> young Americans approved of Obama at the time of the poll? Again, this depends on whether the sampling was random.</li>
</ul>
<p>Eighth, is the sampling procedure <strong>unbiased</strong>? In other words, do all observations have an equal chance of being included in the sample?</p>
<ul>
<li>Urn: Since each bead was equally sized and we mixed the urn before using the shovel, each bead had an equal chance of being included in a sample and hence the sampling was unbiased.</li>
<li>Obama poll: Did all young Americans have an equal chance at being represented in this poll? Again, this depends on whether the sampling was random.</li>
</ul>
<p>Ninth and lastly, was the sampling done at <strong>random</strong>?</p>
<ul>
<li>Urn: As long as you mixed the urn sufficiently before sampling, your samples would be random.</li>
<li>Obama poll: Was the sample conducted at random? We can’t answer this question without knowing about the <em>sampling methodology</em> used by Kennedy School’s Institute of Politics at Harvard University. We’ll discuss this more at the end of this section.</li>
</ul>
<p>In other words, the poll by Kennedy School’s Institute of Politics at Harvard University can be thought of as <em>an instance</em> of using the shovel to sample beads from the urn. Furthermore, if another polling company conducted a similar poll of young Americans at roughly the same time, they would likely get a different estimate than 41%. This is due to <em>sampling variation</em>.</p>
<p>Let’s now revisit the sampling paradigm from Subsection <a href="one-parameter.html#terminology-and-notation">6.3.1</a>:</p>
<p><strong>In general</strong>:</p>
<ul>
<li>If the sampling of a sample of size <span class="math inline">\(n\)</span> is done at <strong>random</strong>, then</li>
<li>the sample is <strong>unbiased</strong> and <strong>representative</strong> of the population of size <span class="math inline">\(N\)</span>, thus</li>
<li>any result based on the sample can <strong>generalize</strong> to the population, thus</li>
<li>the point estimate is a <strong>“good guess”</strong> of the unknown population parameter, thus</li>
<li>instead of performing a census, we can <strong>infer</strong> about the population using sampling.</li>
</ul>
<p><strong>Specific to the urn:</strong></p>
<ul>
<li>If we extract a sample of <span class="math inline">\(n = 50\)</span> beads at <strong>random</strong>, in other words, we mix all of the equally sized beads before using the shovel, then</li>
<li>the contents of the shovel are an <strong>unbiased representation</strong> of the contents of the urn’s 1000 beads, thus</li>
<li>any result based on the shovel’s beads can <strong>generalize</strong> to the urn, thus</li>
<li>the sample proportion <span class="math inline">\(\hat{p}\)</span> of the <span class="math inline">\(n = 50\)</span> beads in the shovel that are red is a <strong>“good guess”</strong> of the population proportion <span class="math inline">\(p\)</span> of the <span class="math inline">\(N = 1000\)</span> beads that are red, thus</li>
<li>instead of manually going over all 1000 beads in the urn, we can <strong>infer</strong> about the urn using the shovel.</li>
</ul>
<p><strong>Specific to the Obama poll:</strong></p>
<ul>
<li>If we had a way of contacting a <strong>randomly</strong> chosen sample of 2089 young Americans and polling their approval of President Obama in 2013, then</li>
<li>these 2089 young Americans would be an <strong>unbiased</strong> and <strong>representative</strong> sample of <em>all</em> young Americans in 2013, thus</li>
<li>any results based on this sample of 2089 young Americans can <strong>generalize</strong> to the entire population of <em>all</em> young Americans in 2013, thus</li>
<li>the reported sample approval rating of 41% of these 2089 young Americans is a <strong>good guess</strong> of the true approval rating among all young Americans in 2013, thus</li>
<li>instead of performing an expensive census of all young Americans in 2013, we can <strong>infer</strong> about all young Americans in 2013 using polling.</li>
</ul>
<p>So as you can see, it was critical for the sample obtained by Kennedy School’s Institute of Politics at Harvard University to be truly random in order to infer about <em>all</em> young Americans’ opinions about Obama. Was their sample truly random? It’s hard to answer such questions without knowing about the <em>sampling methodology</em> they used.</p>
<p>For example, what if Kennedy School’s Institute of Politics at Harvard University conducted this poll using only mobile phone numbers? People without mobile phones would be left out and therefore not represented in the sample. This flaw is an example of <strong>censoring</strong>, the exclusion of certain datapoints due to an issue with data collection. This results in an incomplete observation and increases the prediction uncertainty of the estimand, Obama’s approval rating among young Americans. Ensuring that our samples were random was easy to do in our sampling urn exercises; however, in a real life situation like the Obama poll, this is much harder to do.</p>
<p>What you have visualized in this chapter was a demonstration of a famous theorem, or mathematically proven truth, called the <em>Central Limit Theorem</em>. It loosely states that when sample means are based on larger and larger sample sizes, the sampling distribution of these sample means becomes both more and more normally shaped and more and more narrow. In other words, the sampling distribution increasingly follows a <em>normal distribution</em> and the variation of these sampling distributions gets smaller, as quantified by their standard errors.</p>
</div>
<div id="sampling-mechanism" class="section level3" number="6.5.4">
<h3>
<span class="header-section-number">6.5.4</span> Sampling Mechanism<a class="anchor" aria-label="anchor" href="#sampling-mechanism"><i class="fas fa-link"></i></a>
</h3>
<p>One of the most important aspects of sampling is the <strong>sampling mechanism</strong>: the mechanism through which we sample our population. This concept is related, but distinctly different, from the <strong>assignment mechanism</strong> that we learned about in Chapter 3.</p>
<p>The assignment mechanism sorts units into control and experiment groups, while the sampling mechanism is the means through which we acquire our sample. Assignment mechanisms do not have a place in our urn paradigm since we are not measuring any causal relationship or assigning beads to specific groups.</p>
<p>To think about the sampling mechanism further: why are certain beads sampled, while others are not? Is this completely random?</p>
<p>In order to investigate this concept, let’s revisit our Preceptor Tables.</p>
<div id="preceptor-tables-1" class="section level4" number="6.5.4.1">
<h4>
<span class="header-section-number">6.5.4.1</span> Preceptor Tables<a class="anchor" aria-label="anchor" href="#preceptor-tables-1"><i class="fas fa-link"></i></a>
</h4>
<p>Recall that a Preceptor Table is a table with rows and columns for all the data we would (reasonably) like to have. There are two different types of Preceptor Tables that are applicable to our urn example: actual and ideal.</p>
<div class="figure">
<span id="fig:unnamed-chunk-476"></span>
<img src="06-one-parameter/images/here_we_go.png" alt="When you see another Precetor Table section." width="100%"><p class="caption">
FIGURE 6.24: When you see another Precetor Table section.
</p>
</div>
<p>An actual Preceptor Table shows what we <em>actually</em> know. Accordingly, the table is riddled with question marks that the real world saddles us with. The ideal Preceptor Table is the Preceptor Table with no question marks, and a reasonable number of rows and columns. With an ideal Preceptor Table, there is no need for inference; the estimand is a simple matter of arithmetic.</p>
<p>To visualize the different Preceptor Tables and their usefulness to us data scientists, let’s revisit our urn.</p>
<p>As is the case in the Rubin Causal Model, we <em>wish</em> we knew the values for every single unit in every possible scenario. The analogous ideal here would be a table where we know the color identity of every single bead. To compare to our previous Preceptor Table, this is what our ideal Preceptor Table would look like:</p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#lijmnwcmim .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lijmnwcmim .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lijmnwcmim .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lijmnwcmim .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lijmnwcmim .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lijmnwcmim .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lijmnwcmim .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lijmnwcmim .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lijmnwcmim .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lijmnwcmim .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lijmnwcmim .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lijmnwcmim .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#lijmnwcmim .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lijmnwcmim .gt_from_md > :first-child {
  margin-top: 0;
}

#lijmnwcmim .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lijmnwcmim .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lijmnwcmim .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#lijmnwcmim .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lijmnwcmim .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#lijmnwcmim .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lijmnwcmim .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lijmnwcmim .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lijmnwcmim .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lijmnwcmim .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lijmnwcmim .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#lijmnwcmim .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lijmnwcmim .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#lijmnwcmim .gt_left {
  text-align: left;
}

#lijmnwcmim .gt_center {
  text-align: center;
}

#lijmnwcmim .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lijmnwcmim .gt_font_normal {
  font-weight: normal;
}

#lijmnwcmim .gt_font_bold {
  font-weight: bold;
}

#lijmnwcmim .gt_font_italic {
  font-style: italic;
}

#lijmnwcmim .gt_super {
  font-size: 65%;
}

#lijmnwcmim .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="lijmnwcmim" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>ID</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Year</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">1</td>
      <td class="gt_row gt_center">white</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">2</td>
      <td class="gt_row gt_center">white</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">...</td>
      <td class="gt_row gt_center">...</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">200</td>
      <td class="gt_row gt_center">red</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">201</td>
      <td class="gt_row gt_center">white</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">...</td>
      <td class="gt_row gt_center">...</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">1000</td>
      <td class="gt_row gt_center">red</td>
    </tr>
</tbody>
</table></div></div>
<p> </p>
<p>We can create the ideal Preceptor Table by performing the exhaustive census of the entire urn. Let’s say that, after this tedious process, we find that the <strong>true</strong> and <strong>real</strong> proportion of red beads is exactly 40%. We know the color of every bead.</p>
<p>In this world, the estimand, the proportion of red beads in the urn, is a simple matter of arithmetic. However, as has been emphasized before, performing an exhaustive count is not the easiest way to estimate the proportion of red beads. Real life sampling is far more complex. The process is <strong>extremely</strong> prone to error. Despite that, most people overestimate the validity of conclusions drawn from sampling. To stress the unknowns in sampling, let’s look at our actual Preceptor Table.</p>
<p>Let’s imagine we use our shovel and sample 100 beads from the urn. After taking our sample, we find that 40% of the <em>sampled</em> beads are red. Let’s visualize this by looking at the entire urn after we have taken our sample. This is an actual Preceptor Table. We only know the colors of our randomly sampled 100 beads, the remaining bead colors are our missing data!</p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#oszctjloya .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#oszctjloya .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oszctjloya .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#oszctjloya .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#oszctjloya .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oszctjloya .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oszctjloya .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#oszctjloya .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#oszctjloya .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#oszctjloya .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#oszctjloya .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#oszctjloya .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#oszctjloya .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#oszctjloya .gt_from_md > :first-child {
  margin-top: 0;
}

#oszctjloya .gt_from_md > :last-child {
  margin-bottom: 0;
}

#oszctjloya .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#oszctjloya .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#oszctjloya .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oszctjloya .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#oszctjloya .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oszctjloya .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#oszctjloya .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#oszctjloya .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oszctjloya .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oszctjloya .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#oszctjloya .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oszctjloya .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#oszctjloya .gt_left {
  text-align: left;
}

#oszctjloya .gt_center {
  text-align: center;
}

#oszctjloya .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#oszctjloya .gt_font_normal {
  font-weight: normal;
}

#oszctjloya .gt_font_bold {
  font-weight: bold;
}

#oszctjloya .gt_font_italic {
  font-style: italic;
}

#oszctjloya .gt_super {
  font-size: 65%;
}

#oszctjloya .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="oszctjloya" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>ID</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Color</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">1</td>
      <td class="gt_row gt_center">?</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">2</td>
      <td class="gt_row gt_center">?</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">...</td>
      <td class="gt_row gt_center">...</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">...</td>
      <td class="gt_row gt_center">...</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">200</td>
      <td class="gt_row gt_center">red</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">201</td>
      <td class="gt_row gt_center">?</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">...</td>
      <td class="gt_row gt_center">...</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">...</td>
      <td class="gt_row gt_center">...</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">999</td>
      <td class="gt_row gt_center">red</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000; font-weight: bold;">1000</td>
      <td class="gt_row gt_center">?</td>
    </tr>
</tbody>
</table></div></div>
<p> </p>
<p>Where is all of our data? Well, when we take a sample of 100 beads, we only have color identifications for 100 of the total 1000 beads in the urn. The rest of the beads were not sampled and we cannot say for certain whether they are white or red.</p>
<p>Something else we must consider is why some beads <strong>do</strong> get sampled, while others do not. This is a consequence of the sampling mechanism. Because we are drawing the sample using a shovel with 100 slots, we only have 100 known values. Therefore, our shovel (in addition to mixing the urn beforehand) is our sampling mechanism.</p>
<p>Consider this: what does this information tell us, specifically, about Bead 1? Bead 2? We know the proportion of red beads in our sample is 40%. Does this mean that bead 1 has <em>precisely</em> a 40% chance of being red? As we learned in Chapter 5, this is not true! There is uncertainty.</p>
<p>We can only claim <em>for certain</em> that, of the 100 beads that we sampled (of the total 1000 beads in the urn), 40% were red. If we were making a prediction of the probability of one of our <strong>sampled</strong> beads being red, 40% would be the correct probability. If we were making a prediction of the probability that an <strong>unsampled</strong> bead was red, the answer of 40% would be incorrect, but nor is it likely to be extremely incorrect. The sample does tell us something.</p>
</div>
</div>
<div id="precision-versus-accuracy-or-bias-versus-variance" class="section level3" number="6.5.5">
<h3>
<span class="header-section-number">6.5.5</span> Precision versus accuracy (or bias versus variance)<a class="anchor" aria-label="anchor" href="#precision-versus-accuracy-or-bias-versus-variance"><i class="fas fa-link"></i></a>
</h3>
<p>We saw in a previous section that as our sample size <span class="math inline">\(n\)</span> increases, our point estimates will vary less and less and be more and more concentrated around the true population parameter. This variation is quantified by the decreasing <em>standard error</em>. In other words, the typical error of your point estimates will decrease. In our sampling exercise, as the sample size increased, the variation of our sample proportions <span class="math inline">\(\hat{p}\)</span> decreased. This is also known as having a <em>precise</em> estimate.</p>
<p>So random sampling ensures our point estimates are <em>accurate</em>, while on the other hand having a large sample size ensures our point estimates are <em>precise</em>. While the terms “accuracy” and “precision” may sound like they mean the same thing, there is a subtle difference. Accuracy describes how “on target” our estimates are, whereas precision describes how “consistent” our estimates are. The image below illustrates the difference.</p>
<div class="figure">
<span id="fig:unnamed-chunk-479"></span>
<img src="06-one-parameter/images/accuracy_vs_precision.jpg" alt="Comparing accuracy and precision." width="100%"><p class="caption">
FIGURE 6.25: Comparing accuracy and precision.
</p>
</div>
<p>Now, it’s obvious that the best case scenario is the most precise and the most accurate option. However, real life sampling isn’t so easy!</p>
<p>What if we had the option to use a shovel with <strong>200</strong> slots, but it had a minor magnetic property that caused it to pick up slightly more red beads than the 100 slotted shovel? On one hand, the larger shovel gives us increased precision due to a larger sample size. On the other, its magnetic property gives us decreased accuracy due to a sampling bias. Here, as is often the case in the real world, there is a tradeoff!</p>
</div>
<div id="el-jefes-or-felipes" class="section level3" number="6.5.6">
<h3>
<span class="header-section-number">6.5.6</span> El Jefe’s or Felipe’s?<a class="anchor" aria-label="anchor" href="#el-jefes-or-felipes"><i class="fas fa-link"></i></a>
</h3>
<div class="figure">
<span id="fig:unnamed-chunk-480"></span>
<img src="06-one-parameter/images/el_jefes.png" alt="El Jefe's, a Harvard Square staple, is known for its large portions and delicious horchata." width="100%"><p class="caption">
FIGURE 6.26: El Jefe’s, a Harvard Square staple, is known for its large portions and delicious horchata.
</p>
</div>
<div class="figure">
<span id="fig:unnamed-chunk-481"></span>
<img src="06-one-parameter/images/felipes.png" alt="Felipe's, another staple, is said to have a more authentic experience and addicting churros." width="100%"><p class="caption">
FIGURE 6.27: Felipe’s, another staple, is said to have a more authentic experience and addicting churros.
</p>
</div>
<p>To apply this to a more complex example than an urn, imagine we are conducting a poll to gather information on whether Harvard students prefer El Jefe’s Taqueria or Felipe’s Taqueria. We are given two options: 1) we can conduct the poll on 50 students walking out of Lamont Library or 2) we can conduct the poll on 300 students walking outside of El Jefe’s Taqueria.</p>
<p>The first scenario provides a more accurate estimate, since the students outside of Lamont Library are much less likely to be a biased sample. The second scenario, however, provides a more precise estimate due to the larger sample size. Even though the students <strong>outside</strong> of El Jefe’s might not be patrons, it is safe to assume that at least some will be patrons, making our sample somewhat biased. What is the better option? It depends on your views of the trade-offs between accuracy and precision. The more that precision matters, the more you should prefer the larger sample.</p>
</div>
</div>
<div id="summary-6" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> Summary<a class="anchor" aria-label="anchor" href="#summary-6"><i class="fas fa-link"></i></a>
</h2>
<p>Key lesson:</p>
<blockquote>
<p>The mean or median is a good estimate for the center of the posterior and the standard error or mad is a good estimate for the variability of the posterior, with +/- 2 standard errors covering 95% of the outcomes.</p>
</blockquote>
<p>Other highlights:</p>
<div id="tactial-sampling" class="section level3" number="6.6.1">
<h3>
<span class="header-section-number">6.6.1</span> Tactial sampling<a class="anchor" aria-label="anchor" href="#tactial-sampling"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Sampling allows us to make guesses at an unknown, difficult-to-obtain value by looking at a smaller subset of data and generalizing it to the larger population.</li>
<li>Sampling is preferable in the urn example because counting out 1000 beads from an urn is intensive and tedious.</li>
<li>Sampling is preferable in the real-world because it is often impossible to sample “all the beads” (all the people) in a population. - With sampling, you see variations in your results. This is known as sampling variation and is expected, especially if you draw samples at random (unbiased).</li>
</ul>
</div>
<div id="virtual-sampling-1" class="section level3" number="6.6.2">
<h3>
<span class="header-section-number">6.6.2</span> Virtual sampling<a class="anchor" aria-label="anchor" href="#virtual-sampling-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>By creating a virtual analog of our urn and our shovel, we were able to look at <em>even more</em> samples and observe the effects of sampling size on our results.</li>
<li>More samples yield more even distributions which should resemble a bell.</li>
<li>Larger sample sizes decrease standard deviation, meaning that the resulting proportions red are closer to one another than when the sample sizes are smaller. This means that larger samples = lower SD = more precise guesses.</li>
<li>When we are writing a lot of code for something we want to perform frequently, write a function instead! This saves time and functions can be called within <code>map()</code> for more ease when plotting results.</li>
</ul>
</div>
<div id="standard-error" class="section level3" number="6.6.3">
<h3>
<span class="header-section-number">6.6.3</span> Standard error<a class="anchor" aria-label="anchor" href="#standard-error"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Standard error is just a fancy term for your uncertainty about something you don’t know. Standard error == our (uncertain) beliefs.</li>
<li>The standard error measures the accuracy of a sample distribution as compared to the population by using the standard deviation.</li>
<li>We find that larger sample sizes = lower standard errors = more accurate and representative guesses.</li>
<li>If we could only know two pieces of information from our data, we would need a measure of the <strong>center</strong> of the distribution (like mean or median) and a measure of the <strong>variability</strong> of the distribution (like sd or MAD).</li>
<li>SE refers to the standard deviation of a sample statistic (aka point estimate), such as the mean or median. Therefore, the “standard error of the mean” refers to the standard deviation of the distribution of sample means taken from a population.</li>
</ul>
</div>
<div id="answering-the-questions-1" class="section level3" number="6.6.4">
<h3>
<span class="header-section-number">6.6.4</span> Answering the questions<a class="anchor" aria-label="anchor" href="#answering-the-questions-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>A joint distribution allows us to explore the most likely possibilities according to all possible models of this scenario.</li>
<li>The posterior distribution takes a <em>slice</em> of our joint distribution that is more specific to our question.</li>
<li>Both models are valuable for answering questions about our model.</li>
</ul>
</div>
<div id="discussion-1" class="section level3" number="6.6.5">
<h3>
<span class="header-section-number">6.6.5</span> Discussion<a class="anchor" aria-label="anchor" href="#discussion-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<code><a href="https://mc-stan.org/rstanarm/reference/stan_glm.html">stan_glm()</a></code> can create a joint distribution and then estimate the posterior probability distribution, conditional on the data which was passed in to the data argument. This is a much easier way to create the posterior distribution, and will be explored in more detail in Chapter 7.</li>
<li>The sampling mechanism is responsible for which items/beads/people/etc are selected to be sampled. In the urn example, the <em>sampling mechanism</em> is the shovel.</li>
<li>Random sampling ensures that our point estimates are <strong>accurate</strong>, while having a large sample size ensures that our estimates are <strong>precise</strong>. THe difference between precision and accuracy is important if we are to make informed estimates.</li>
<li>Real life sampling is <em>extremely</em> prone to error. This cannot be emphasized enough. We are often forced to choose between precision and accuracy during real-life sampling.</li>
</ul>
<p>In this chapter, we performed both tactile and virtual sampling exercises to infer about an unknown parameter We also presented a case study of sampling in real life with polls. In each case, we used the sample proportion <span class="math inline">\(\hat{p}\)</span> to estimate the population proportion <span class="math inline">\(p\)</span>. However, we are not just limited to scenarios related to proportions. In other words, we can use sampling to estimate other population parameters using other point estimates as well.</p>
<p>As we continue our journey, recall the case of Primrose Everdeen and what she represents: no matter how realistic is our model is, our predictions are <strong>never certain</strong>. “May the posterior be ever in your favor!”</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="probability.html"><span class="header-section-number">5</span> Probability</a></div>
<div class="next"><a href="two-parameters.html"><span class="header-section-number">7</span> Two Parameters</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#one-parameter"><span class="header-section-number">6</span> One Parameter</a></li>
<li>
<a class="nav-link" href="#sampling-activity"><span class="header-section-number">6.1</span> Real sampling activity</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#using-the-shovel-method-once"><span class="header-section-number">6.1.1</span> Using the shovel method once</a></li>
<li><a class="nav-link" href="#student-shovels"><span class="header-section-number">6.1.2</span> Using the shovel 33 times</a></li>
<li><a class="nav-link" href="#what-did-we-just-do"><span class="header-section-number">6.1.3</span> What did we just do?</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#virtual-sampling"><span class="header-section-number">6.2</span> Virtual sampling</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#using-the-virtual-shovel-once"><span class="header-section-number">6.2.1</span> Using the virtual shovel once</a></li>
<li><a class="nav-link" href="#using-the-virtual-shovel-33-times"><span class="header-section-number">6.2.2</span> Using the virtual shovel 33 times</a></li>
<li><a class="nav-link" href="#shovel-1000-times"><span class="header-section-number">6.2.3</span> Using the virtual shovel 1,000 times</a></li>
<li><a class="nav-link" href="#different-shovels"><span class="header-section-number">6.2.4</span> The effect of different shovel sizes</a></li>
<li><a class="nav-link" href="#functions-are-your-friend"><span class="header-section-number">6.2.5</span> Functions are your friend!</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#standard-errors"><span class="header-section-number">6.3</span> Standard error</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#terminology-and-notation"><span class="header-section-number">6.3.1</span> Terminology and notation</a></li>
<li><a class="nav-link" href="#sampling-definitions"><span class="header-section-number">6.3.2</span> Statistical definitions</a></li>
<li><a class="nav-link" href="#what-is-a-standard-error"><span class="header-section-number">6.3.3</span> What is a “standard error?”</a></li>
<li><a class="nav-link" href="#moral-of-the-story"><span class="header-section-number">6.3.4</span> The moral of the story</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#answering-the-questions"><span class="header-section-number">6.4</span> Answering the questions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#joint-distribution"><span class="header-section-number">6.4.1</span> Joint distribution</a></li>
<li><a class="nav-link" href="#posterior-distribution"><span class="header-section-number">6.4.2</span> Posterior distribution</a></li>
<li><a class="nav-link" href="#using-the-posterior"><span class="header-section-number">6.4.3</span> Using the posterior</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#discussion"><span class="header-section-number">6.5</span> Discussion</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#stan_glm"><span class="header-section-number">6.5.1</span> stan_glm()</a></li>
<li><a class="nav-link" href="#hypothesis-tests"><span class="header-section-number">6.5.2</span> Hypothesis tests</a></li>
<li><a class="nav-link" href="#sampling-case-study"><span class="header-section-number">6.5.3</span> Case study: Polls</a></li>
<li><a class="nav-link" href="#sampling-mechanism"><span class="header-section-number">6.5.4</span> Sampling Mechanism</a></li>
<li><a class="nav-link" href="#precision-versus-accuracy-or-bias-versus-variance"><span class="header-section-number">6.5.5</span> Precision versus accuracy (or bias versus variance)</a></li>
<li><a class="nav-link" href="#el-jefes-or-felipes"><span class="header-section-number">6.5.6</span> El Jefe’s or Felipe’s?</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#summary-6"><span class="header-section-number">6.6</span> Summary</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tactial-sampling"><span class="header-section-number">6.6.1</span> Tactial sampling</a></li>
<li><a class="nav-link" href="#virtual-sampling-1"><span class="header-section-number">6.6.2</span> Virtual sampling</a></li>
<li><a class="nav-link" href="#standard-error"><span class="header-section-number">6.6.3</span> Standard error</a></li>
<li><a class="nav-link" href="#answering-the-questions-1"><span class="header-section-number">6.6.4</span> Answering the questions</a></li>
<li><a class="nav-link" href="#discussion-1"><span class="header-section-number">6.6.5</span> Discussion</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/PPBDS/primer/blob/master/06-one-parameter.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/PPBDS/primer/edit/master/06-one-parameter.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Preceptor’s Primer for Bayesian Big Data Science</strong>" was written by David Kane. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
